---
title: æ™ºèƒ½å·¥ç¨‹
date: 2025-05-22
categories: [æœºå™¨äºº, ç§»åŠ¨æœºå™¨äººå»ºæ¨¡]
tags: [ç§»åŠ¨æœºå™¨äºº]
math: true
---


# å‰è½¦å¼ç§»åŠ¨æœºå™¨äººçš„å»ºæ¨¡

## ICRæ–¹æ³•

æ ¹æ®é¢˜æ„ï¼Œå¯ä»¥ç”»å‡ºä¸‹è¿°ç¤ºæ„å›¾ï¼š

![figure1.svg](assets/media/figure1.svg)

å¹¶å¾—åˆ°ç›¸å…³å˜é‡å€¼å¦‚ä¸‹ï¼š

| **å˜é‡**   | **å«ä¹‰**                                              | å€¼                               |
| ---------- | ----------------------------------------------------- | -------------------------------- |
| $\alpha_i$ | $x_R$æ–¹å‘ä¸æœºå™¨äººä¸­å¿ƒåˆ°è½®å­$i$ä¸­å¿ƒè¿çº¿æ–¹å‘çš„å¤¹è§’ã€‚    | $-\frac{\pi}{2}/\frac{\pi}{2}/0$ |
| $\beta_i$  | æœºå™¨äººä¸­å¿ƒåˆ°è½®å­$i$ä¸­å¿ƒè¿çº¿æ–¹å‘ä¸è½®å­è§’åŠ¨é‡æ–¹å‘å¤¹è§’ã€‚ | $-\pi/0/\frac{\pi}{2}$           |
| $l_i$      | è½®å­$i$ä¸­å¿ƒåˆ°æœºå™¨äººä¸­å¿ƒçš„è·ç¦»ã€‚                       | $1/1/2$                          |

åŒæ—¶å¯¹äºå•ä¸ªè½®å­ï¼Œå‡è®¾$r$ä¸ºè½®å­åŠå¾„ï¼Œ$\varphi_i$ä¸ºè½®å­$i$æ—‹è½¬è§’é€Ÿåº¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![figure3.svg](assets/media/figure3.svg)

ç”±äº$\beta$å®é™…ä¸Šæ˜¯å˜é‡ï¼Œ$\beta_C=\pi/2$ä»…ä»…è¡¨ç¤ºå‡ ä½•å®‰è£…æ—¶çš„åˆå§‹ä½ç½®ï¼Œç”±äºå‰è½®å¯ä»¥è½¬åŠ¨ï¼Œå¯ç”¨$\beta$è¡¨ç¤ºå…¶èˆµæœºè½¬è§’ï¼Œä¹Ÿå°±æ˜¯å·¦å³è½¬åŠ¨çš„è§’åº¦ï¼ˆå®é™…ä¸Šè¦å‡å»ä¸€ä¸ª$\pi/2$ï¼‰ã€‚è¿™ç§æƒ…å†µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![figure2.svg](assets/media/figure2.svg)

æ ¹æ®ä¸Šå›¾æ ¹æ®è§’é€Ÿåº¦çº¿é€Ÿåº¦å…¬å¼å¯å¾—ï¼š

$$
\dot{\theta_R}=\frac{r\dot{\varphi_C}}{R}\tag{1}
$$

å…¶ä¸­ï¼š

$$
R=\frac{l_C}{\cos{(\pi-\beta_C)}}=-\frac{l_C}{\cos{\beta_C}}\tag{2}
$$

å°†ï¼ˆ2ï¼‰å¼ä»£å…¥ï¼ˆ1ï¼‰å¼å¯å¾—ï¼š

$$
\dot{\theta_R}=r\dot{\varphi_C}\cdot(-\frac{\cos{\beta_C}}{l_C})\tag{3}
$$

å¦å¤–ï¼Œç”±äºICRæ˜¯ç¬æ—¶æ—‹è½¬ä¸­å¿ƒï¼Œåœ¨çŸ­æ—¶é—´å†…$\beta$å¹¶ä¸å‘ç”Ÿæ”¹å˜ï¼Œæ—‹è½¬ä¸­å¿ƒä½ç½®ä¹Ÿä¸å˜ï¼Œæœºå™¨äººä¸­å¿ƒç»•ç€ICRè¿›è¡Œåœ†å‘¨è¿åŠ¨ï¼Œäºæ˜¯åœ¨$y_R$æ–¹å‘ä¸Šæ²¡æœ‰é€Ÿåº¦ï¼Œå³ï¼š

$$
\dot{y_R}=0\tag{4}
$$

è€Œåœ¨$x_R$æ–¹å‘ä¸Šï¼Œå¯ä»¥æ ¹æ®å…³è”é€Ÿåº¦ï¼Œæˆ–è€…åˆ©ç”¨çº¿é€Ÿåº¦å…¬å¼è¿›è¡Œæ±‚è§£ï¼Œå¦‚æœæŒ‰ç…§åè€…ï¼Œåˆ™å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š

$$
\begin{aligned}\dot{x_R}&=\dot{\theta_R\cdot}R\sin{(\pi-\beta_C)}\\
&=\frac{r\dot{\varphi_C}}{R}\cdot R\sin{\beta_C}\\
&=r\dot{\varphi_C}\sin{\beta_C}
\end{aligned}\tag{5}
$$

ç”±ï¼ˆ5ï¼‰å¼ã€ï¼ˆ4ï¼‰å¼å’Œï¼ˆ3ï¼‰å¼ï¼Œå¯ä»¥å†™å‡ºæœºå™¨äººè¿åŠ¨è¡¨è¾¾å¼ä¸ºï¼š

$$
\dot{\xi_R}=\begin{pmatrix}
\dot{x_R}\\\dot{y_R}\\\dot{\theta_R}\end{pmatrix}=r\dot{\varphi_C}\begin{pmatrix}
\sin{\beta_C}\\0\\-\frac{\cos{\beta_C}}{l_C}\end{pmatrix}\tag{6}
$$

## è¿åŠ¨çº¦æŸæ³•

æ ¹æ®é¢˜æ„ï¼Œå¯ä»¥ç”»å‡ºä¸‹è¿°ç¤ºæ„å›¾ï¼š

![figure4.svg](assets/media/figure4.svg)

å¯¹äºçº¦æŸæ³•æ±‚è§£æ—¶ï¼Œéœ€è¦æœ‰å‡ ä¸ªå‰æå‡è®¾ï¼Œæœ€ä¸»è¦çš„ä¸¤ç‚¹æ˜¯è½¦è½®åšçº¯æ»šåŠ¨è¿åŠ¨ï¼Œè€Œä¸”ä¸ä¼šä¾§æ»‘ï¼Œç”±äºä¸‰è½®è½¦çš„è½¬å‘è½®åœ¨$x_R$è½´ä¸Šï¼Œæ‰€ä»¥$\alpha$å§‹ç»ˆä¸º0ã€‚é¦–å…ˆåˆ—å‡ºçº¯æ»šåŠ¨æ–¹ç¨‹ï¼ˆä¸ºäº†ç®€åŒ–èµ·è§çœç•¥ä¸‹æ ‡ï¼‰ï¼š

$$
\dot{x_R}\cdot\sin{(\pi-\beta(t))}+(\dot{y_R}+\dot{\theta_R}l)\cdot\cos{(\pi-\beta(t))}=r\dot{\varphi}
$$

åŒ–ç®€å¯å¾—ï¼š

$$
\dot{x_R}\cdot\sin{\beta(t)}-(\dot{y_R}+\dot{\theta_R}l)\cdot\cos{\beta(t)}=r\dot{\varphi}\tag{7}
$$

æ¥ç€åˆ—å‡ºæ³•çº¿æ–¹å‘ä¸Šçš„æ— æ»‘åŠ¨æ–¹ç¨‹ï¼š

$$
-\dot{x_R}\cdot\cos{(\pi-\beta(t))}+(\dot{y_R}+\dot{\theta_R}l)\cdot\sin{(\pi-\beta(t))}=0
$$

åŒ–ç®€å¾—ï¼š

$$
\dot{x_R}\cdot\cos{\beta(t)}+(\dot{y_R}+\dot{\theta_R}l)\cdot\sin{\beta(t)}=0\tag{8}
$$

ç”±äºéšåŠ¨è½®æ— ä¾§å‘æ»‘åŠ¨ï¼Œäºæ˜¯:

$$
\dot{y_R}=0\tag{9}
$$

å°†ï¼ˆ9ï¼‰å¼ä»£å…¥ï¼ˆ7ï¼‰å¼å’Œï¼ˆ8ï¼‰å¼ï¼Œå¹¶åŒ–ç®€å¯ä»¥å¾—åˆ°ï¼š

$$
\left\{\begin{aligned}
\dot{x_R}\cdot\sin{\beta(t)}-\dot{\theta_R}l\cdot\cos{\beta(t)}&=r\dot{\varphi}\\
\dot{x_R}\cdot\cos{\beta(t)}+\dot{\theta_R}l\cdot\sin{\beta(t)}&=0
\end{aligned}
\right.
$$

è§£æ–¹ç¨‹å¯ä»¥å¾—ï¼š

$$
\left\{\begin{aligned}
\dot{x_R}&=r\dot{\varphi}\sin{\beta(t)}\\
\dot{\theta_R}&=r\dot{\varphi}\cdot(-\frac{\cos{\beta(t)}}{l})
\end{aligned}
\right.
$$

ä¸ICRæ³•æ±‚å‡ºçš„ç»“æœå®Œå…¨ä¸€è‡´ã€‚

# æ§åˆ¶å™¨çš„è®¾è®¡ä¸ä»¿çœŸå®éªŒ

åœ¨å‰è½¦ç§»åŠ¨æœºå™¨äººå»ºæ¨¡éƒ¨åˆ†ï¼Œå¯¹æ¨¡å‹è¿›è¡Œäº†è¯¦ç»†çš„åˆ†æï¼Œæœ€ç»ˆå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š

$$
\left\{\begin{aligned}
\dot{x_R}&=r\dot{\varphi}\sin{\beta(t)}\\
\dot{\theta_R}&=r\dot{\varphi}\cdot(-\frac{\cos{\beta(t)}}{l})
\end{aligned}
\right.
$$

å†è§£é‡Šä¸€ä¸‹å„ä¸ªå‚æ•°çš„å«ä¹‰ï¼š
$\dot{x_R}$ï¼šæœºå™¨äººåˆ‡çº¿æ–¹å‘çš„çº¿é€Ÿåº¦ï¼›

$\beta(t)$ï¼šæœºå™¨äººè½¬å‘è½®çš„æ³•çº¿æ–¹å‘ä¸æœºå™¨äººå‰è¿›æ–¹å‘çš„å¤¹è§’ï¼›

$\dot{\theta_R}$ï¼šæœºå™¨äººæ—‹è½¬çš„è§’é€Ÿåº¦ï¼ˆé€†æ—¶é’ˆä¸ºæ­£ï¼Œé¡ºæ—¶é’ˆä¸ºè´Ÿï¼‰ï¼›

$r$ï¼šæœºå™¨äººçš„è½¦è½®åŠå¾„ï¼›

$\dot{\varphi}$ï¼šæœºå™¨äººçš„è½¦è½®æ—‹è½¬é€Ÿåº¦ã€‚â€™

## å®šç‚¹æ§åˆ¶å™¨çš„è®¾è®¡

ä»¥ä¸Šè¿°æœºå™¨äººä¸ºä¾‹ï¼Œæœ‰å¾ˆå¤šç§å®šç‚¹æ§åˆ¶å™¨çš„è®¾è®¡æ–¹æ³•ï¼Œæ¯”å¦‚**PIDæ§åˆ¶å™¨**å’Œ**éçº¿æ€§æ§åˆ¶å™¨**ï¼Œå¦å¤–è¿˜å¯ä»¥è½¬æ¢æˆæåæ ‡ç³»ä¸‹è¿›è¡Œæ¨¡å‹çš„å»ºç«‹ã€‚æœ¬æ¬¡ä¸»è¦ä½¿ç”¨**æåæ ‡å˜æ¢çš„éçº¿æ€§æ§åˆ¶å™¨**å®ç°æœºå™¨äººä»Aç‚¹ç§»åŠ¨åˆ°Bç‚¹çš„å®šç‚¹æ§åˆ¶å™¨åŠŸèƒ½ã€‚

### åŸºäºæåæ ‡å˜æ¢çš„éçº¿æ€§æ§åˆ¶å™¨

é¦–å…ˆéœ€è¦å°†ç¬›å¡å°”åæ ‡ç³»ä¸‹çš„è¡¨è¿°è½¬æ¢åˆ°æåæ ‡ç³»ä¸­ï¼Œç³»ç»Ÿçš„å¼€ç¯è¯¯å·®è½¬æ¢ä¸ºåœ¨æåæ ‡ç³»ä¸‹çš„è¡¨è¾¾å½¢å¼å¦‚ä¸‹æ‰€ç¤ºï¼š

$$
\left\{
\begin{aligned}
\rho&=\sqrt{\widetilde{x}^2+\widetilde{y}^2}\\
\beta&=-\arctan2(-\widetilde{y},-\widetilde{x})\\
\alpha&=-\beta-\widetilde{\theta}
\end{aligned}
\right. 
$$

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯$\arctan2$å‡½æ•°æ˜¯å››è±¡é™åæ­£åˆ‡å‡½æ•°ï¼Œ$\arctan2(y,x)$**å¾—åˆ°çš„è§’åº¦ä¸ä»…ä»…å–å†³äºæ­£åˆ‡å€¼$y/x$ï¼Œè¿˜å–å†³äºç‚¹$(x,y)$æ‰€åœ¨çš„è±¡é™**ï¼Œæ‰€ä»¥åœ¨æ­å»ºä»¿çœŸæ¨¡å‹çš„æ—¶å€™ï¼Œè´Ÿå·ä¸èƒ½çº¦å»ï¼Œå¦åˆ™ä¼šå¯¹åç»­çš„è°ƒå‚è¿‡ç¨‹äº§ç”Ÿå½±å“ï¼›

å¦å¤–è¿™é‡Œçš„$\widetilde{\theta}$æ˜¯åœ¨å‡è®¾æœºå™¨äººç»ˆç‚¹æ–¹å‘è§’åº¦ä¸º0çš„æ—¶å€™è®¡ç®—çš„ï¼Œå¦‚æœæœºå™¨äººç»ˆç‚¹çš„æ–¹å‘è§’åº¦ä¸ä¸º0ï¼Œæ¨¡å‹å¯èƒ½ä¸é€‚ç”¨ã€‚

åœ¨ä¸Šè¿°å…¬å¼ä¸­ï¼Œ$\rho$ä¸ºæœºå™¨äººå½“å‰ä½ç½®è·ç¦»ç›®æ ‡ä½ç½®çš„ç›´çº¿è·ç¦»ï¼Œ$\beta$æ˜¯è¿çº¿å¤¹è§’ï¼Œ$\alpha$æ˜¯ç»ˆç‚¹åæ ‡ç³»ç›¸å¯¹äºå½“å‰æœºå™¨äººåæ ‡ç³»çš„æ—‹è½¬è§’åº¦ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼ˆè¿™é‡Œçš„è®¡ç®—è¿‡ç¨‹ä¸å†èµ˜è¿°ï¼Œç›´æ¥å¯¹ä¸Šè¿°è¡¨è¾¾å¼åˆ†åˆ«æ±‚å¯¼å³å¯ï¼‰ï¼š

$$
\begin{bmatrix}\dot{\rho}\\\dot{\beta}\\\dot{\alpha}\end{bmatrix}=\begin{bmatrix}-\cos{\alpha}&0\\-\dfrac{1}{\rho}\sin{\alpha}&0\\\dfrac{1}{\rho}\sin{\alpha}&-1\end{bmatrix}\begin{bmatrix}v_1\\v_2\end{bmatrix}
$$

æ ¹æ®ä»¥ä¸Šé—­ç¯ç³»ç»Ÿè¯¯å·®æ¨¡å‹è®¾è®¡éçº¿æ€§æ§åˆ¶å™¨å¦‚ä¸‹ï¼š

$$
\left\{
\begin{aligned}
v_1&=k_\rho\rho\cos{\alpha}\\
v_2&=k_\alpha\alpha+\dfrac{k_\rho\sin{\alpha}\cos{\alpha}}{\alpha}(\alpha-k_\beta\beta)
\end{aligned}
\right. 
$$

å†å¯¹ä¸Šè¿°æ¨¡å‹è¿›è¡Œç¨³å®šæ€§åˆ†æï¼Œé€šè¿‡æ„å»ºéè´Ÿæé›…æ™®è¯ºå¤«å‡½æ•°ï¼š

$$
V_1=\frac{1}{2}\rho^2+\frac{1}{2}\alpha^2+\frac{1}{2}\beta^2
$$

å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„ç¨³å®šæ€§æ¡ä»¶ä¸ºï¼š

$$
-k_\rho\cos^2{\alpha}\cdot\rho^2-k_\alpha\alpha^2\le0
$$

äºæ˜¯é‡‡ç”¨ä»¥ä¸Šæ–¹æ³•è¿›è¡Œå®šç‚¹æ§åˆ¶å™¨çš„è®¾è®¡ï¼Œåœ¨simulinkä»¿çœŸç¯å¢ƒä¸­ç»˜åˆ¶ç³»ç»Ÿç»“æ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Untitled.png](assets/media/Untitled.png)

å…¶ä¸­åŒ…å«ä¸‰ä¸ªæ¨¡å—**to_polar**ï¼Œ**controller**ï¼Œ**forward_kinematics**ï¼Œåˆ†åˆ«å®ç°çš„åŠŸèƒ½æ˜¯å°†ç¬›å¡å°”åæ ‡è½¬æ¢åˆ°æåæ ‡ç³»ä¸­ï¼Œæœºå™¨äººçº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦çš„éçº¿æ€§æ§åˆ¶å™¨ï¼Œä»¥åŠæœºå™¨äººçš„æ­£è¿åŠ¨å­¦æ¨¡å—ï¼Œå®ƒä»¬çš„å…·ä½“ç»“æ„åˆ†åˆ«å¦‚ä¸‹ï¼Œ
**to_polaræ¨¡å—ï¼Œ**

![Untitled](assets/media/Untitled%201.png)

**controlleræ¨¡å—ï¼Œ**

![Untitled](assets/media/Untitled%202.png)

**forward_kinematicsæ¨¡å—ï¼Œ**

![Untitled](assets/media/Untitled%203.png)

åœ¨æ­å»ºæ§åˆ¶å™¨æ¨¡å—æ—¶ï¼Œå‘ç°$\alpha$ä¼šåœ¨åˆ†æ¯ä¸­å‡ºç°ï¼Œéœ€è¦è€ƒè™‘è¿‡é›¶çš„æƒ…å†µï¼Œè¿™é‡Œç»™å®ƒåŠ ä¸Šäº†ä¸€ä¸ªè¾ƒå°çš„é‡ç”¨äºç®€ä¾¿å¤„ç†è¿™ç§æƒ…å†µã€‚

### ä»¿çœŸå®éªŒç»“æœåˆ†æ

åœ¨è¯•éªŒè°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œè®¾ç½®çš„Kå€¼å‚æ•°ä¸ºï¼š$K_\rho=0.4$ ï¼Œ$K_\alpha=0.8$ï¼Œ $K_\beta=0.5$

æµ‹è¯•äº†å¤šç§åˆå§‹å€¼å’Œç»ˆç‚¹å€¼çš„æƒ…å†µï¼Œç»“æœå¦‚ä¸‹

1. **åˆå§‹ä½å§¿`[0 0 0]`ï¼Œç›®æ ‡ä½å§¿`[5 5 0]`**

![untitled.svg](assets/media/untitled.svg)

![untitled1.svg](assets/media/untitled1.svg)

1. **åˆå§‹ä½å§¿`[2 5 pi/3]`ï¼Œç›®æ ‡ä½å§¿`[-3 -4 0]`**

![untitled2.svg](assets/media/untitled2.svg)

![untitled3.svg](assets/media/untitled3.svg)

åœ¨ä¸Šé¢å‡ å¼ å›¾ç‰‡ä¸­ï¼Œçº¢è‰²ç®­å¤´ä»£è¡¨æœºå™¨äººçš„æœå‘ï¼Œè“è‰²ä»£è¡¨è½¨è¿¹ï¼Œå‘ç°æœºå™¨äººä¸ç®¡åœ¨å“ªä¸ªä½ç½®ï¼Œä»¥ä»€ä¹ˆæ ·çš„è§’åº¦ï¼Œéƒ½å¯ä»¥å¾ˆå¥½åœ°åˆ°è¾¾ç›®æ ‡ç‚¹ï¼Œåªä¸è¿‡ç»è¿‡**å¤šæ¬¡è¯•éªŒå‘ç°ï¼Œç»ˆç‚¹ä½ç½®çš„æ–¹å‘è§’åº¦å¿…é¡»ä¸º0åº¦ï¼Œå¦åˆ™æ¨¡å‹å°±ä¸é€‚ç”¨ã€‚**

![Untitled](assets/media/Untitled%204.png)

å¦‚æœåœ¨ç»ˆç‚¹æ—¶æœºå™¨äººçš„æœå‘è§’åº¦ä¸ä¸º0çš„è¯ï¼Œæ ¹æ®å…¬å¼è®¡ç®—å‡ºæ¥çš„$\alpha=-\beta-\widetilde{\theta}$æ„ä¹‰ä¸æ˜ã€‚

åœ¨å®éªŒè¿‡ç¨‹ä¸­ï¼Œè°ƒèŠ‚å‚æ•°èŠ±è´¹äº†å¾ˆé•¿æ—¶é—´ï¼Œèµ·åˆé˜¶æ®µå‘ç°å‚æ•°çš„æ­£è´Ÿå·å’Œé€šè¿‡æé›…æ™®è¯ºå¤«ç¨³å®šæ€§åˆ†æçš„ç»“æœç›¸æ‚–ï¼Œåæ¥å‘ç°æ˜¯ç”±äºå¯¹**arctan2**æ¨¡å—çš„é”™è¯¯ä½¿ç”¨ï¼Œå°†è´Ÿå·æ“…è‡ªçº¦å»å¯¼è‡´çš„ï¼Œåæ¥å‘ç°ç”±äº$\alpha$åœ¨åˆ†æ¯ä¸­å‡ºç°å¯¼è‡´æŠ¥é”™ï¼Œéœ€è¦å¯¹åˆ†æ¯ä¸º0 çš„æƒ…å†µè¿›è¡Œå•ç‹¬è€ƒè™‘ï¼›å¦å¤–ï¼Œè¿˜éœ€è¦å¯¹æœºå™¨äººçš„æœ€å¤§çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦è¿›è¡Œé™åˆ¶ï¼Œæ›´åŠ ç¬¦åˆå®é™…æƒ…å†µã€‚

## è½¨è¿¹è·Ÿè¸ªæ§åˆ¶å™¨

è½¨è¿¹è·Ÿè¸ªæ˜¯è¦æ±‚ç§»åŠ¨æœºå™¨äººè·Ÿè¸ªä¸€ä¸ªç»™å®šçš„è½¨è¿¹ï¼Œå®ƒä¸è·¯å¾„è·Ÿè¸ªæ§åˆ¶ä¸åŒï¼Œåè€…ä¸éœ€è¦è€ƒè™‘åœ¨æ—¶é—´å±‚é¢ä¸Šè¿›è¡Œè·Ÿè¸ªã€‚

### æ§åˆ¶å™¨çš„è®¾è®¡

å¯¹äºä¸€ä¸ªè½¨è¿¹è·Ÿè¸ªé—®é¢˜ï¼Œæè¿°ç³»ç»Ÿçš„çŠ¶æ€å˜é‡æœ‰æœºå™¨äººå½“å‰çš„ä½å§¿$q$åŠå…¶å¯¼æ•°$\dot{q}$ï¼Œå¾…è·Ÿè¸ªçš„è½¨è¿¹$q_r=[x_{rc}(t),y_{rc}(t),\theta_{rc}(t)]^T$åŠå…¶å¯¼æ•°$\dot{q_r}$ï¼Œç³»ç»Ÿçš„æ§åˆ¶è¾“å…¥ä¾ç„¶æ˜¯ç§»åŠ¨æœºå™¨äººçš„çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦ã€‚

åœ¨è®¾è®¡é—­ç¯ç³»ç»Ÿæ§åˆ¶å™¨çš„æ—¶å€™ï¼Œå°†æƒ¯æ€§åæ ‡ç³»ä¸‹çš„ç›¸å¯¹å·®å€¼è½¬æ¢ä¸ºæœºå™¨äººåæ ‡ç³»ä¸‹çš„ç›¸å¯¹ä½ç½®å·®å€¼ä½œä¸ºè¾…åŠ©è¯¯å·®ä¿¡å·ï¼Œæœ€ç»ˆå¾—åˆ°é—­ç¯ç³»ç»Ÿè¯¯å·®æ¨¡å‹ä¸ºï¼š

$$
\begin{bmatrix}\dot{e_1}\\\dot{e_2}\\\dot{e_3}\end{bmatrix}=\begin{bmatrix}v_1+v_2e_2-v_{1r}\cos{e_3}\\-v_2e_1+v_{1r}\sin{e_3}\\v_2-v_{2r}\end{bmatrix}
$$

æœ€ç»ˆè®¾è®¡çš„æ§åˆ¶å™¨å¦‚ä¸‹ï¼š

$$
\begin{bmatrix}v_1\\v_2\end{bmatrix}=\begin{bmatrix}-k_1e_1+v_{1r}\cos{e_3}\\-v_{1r}\dfrac{\sin{e_3}}{e_3}e_2-k_2e_3+v_{2r}\end{bmatrix}
$$

è®¾è®¡æé›…æ™®è¯ºå¤«å‡½æ•°ä¸º:

$$
V=\frac{1}{2}e_1^2+\frac{1}{2}e_2^2+\frac{1}{2}e_3^2
$$

æ±‚å¾—å¯¼æ•°ä¸º:

$$
\dot{V}=-k_1e_1^2-k_2e_3^2\le0
$$

äºæ˜¯åœ¨$k_1\ge0$å’Œ$k_2\ge0$çš„æƒ…å†µä¸‹ç³»ç»Ÿç¨³å®šã€‚

æ ¹æ®ä¸Šè¿°ç»“è®ºåœ¨simulinkä¸­è¿›è¡Œæ§åˆ¶å™¨çš„è®¾è®¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Screenshot 2024-04-04 200214.png](assets/media/Screenshot_2024-04-04_200214.png)

å…¶ä¸­ä¸»è¦éƒ¨åˆ†æ˜¯world2robotä»¥åŠcontrolleréƒ¨åˆ†ï¼Œå‰è€…å°†æƒ¯æ€§åæ ‡ç³»çš„åæ ‡è½¬æ¢ä¸ºæœºå™¨äººåæ ‡ç³»çš„åæ ‡ï¼Œåè€…æ˜¯æ§åˆ¶å™¨çš„è®¾è®¡ï¼Œå…·ä½“ç»“æ„åˆ†åˆ«å¦‚ä¸‹ï¼š
**world2robotæ¨¡å—ï¼Œ**

![Untitled](assets/media/Untitled%205.png)

**controlleræ¨¡å—ï¼Œ**

![Untitled](assets/media/Untitled%206.png)

### ä»¿çœŸå®éªŒç»“æœåˆ†æ

è¿™é‡Œè®¾ç½®çš„Kå€¼å‚æ•°åˆ†åˆ«ä¸ºï¼š$K_1=1$ï¼Œ$K_2=1$ï¼Œæµ‹è¯•å„ç§æƒ…å†µä¸‹çš„ç»“æœåˆ†åˆ«å¦‚ä¸‹ï¼ˆè¿™é‡Œçš„ç›®æ ‡è½¨è¿¹å‡ç»Ÿä¸€ï¼Œåªæ”¹å˜è½¨è¿¹çš„åˆå€¼ä»¥åŠæœºå™¨äººçš„åˆå€¼ï¼Œè§‚å¯Ÿå®éªŒç°è±¡ï¼‰ã€‚

1. **è½¨è¿¹èµ·ç‚¹`[0 0 0]` ï¼Œæœºå™¨äººèµ·ç‚¹`[1 1 2]`**

![untitled4.svg](assets/media/untitled4.svg)

![untitled5.svg](assets/media/untitled5.svg)

1. **è½¨è¿¹èµ·ç‚¹`[-2 -1 1]` ï¼Œæœºå™¨äººèµ·ç‚¹`[2 -4 1 ]`**

![untitled6.svg](assets/media/untitled6.svg)

![untitled7.svg](assets/media/untitled7.svg)

å¯è§ï¼Œä¸ç®¡ç›®æ ‡è½¨è¿¹å’Œæœºå™¨äººçš„åˆå§‹ä½ç½®åœ¨å“ªé‡Œï¼Œæœ€ç»ˆæœºå™¨äººéƒ½èƒ½å¤Ÿå¾ˆå¥½åœ°è·Ÿè¸ªç›®æ ‡è½¨è¿¹ã€‚

# å‰è½¦é‡Œç¨‹è®¡çš„ä»¿çœŸå®éªŒ

## å‰è½¦é‡Œç¨‹è®¡åŠè¯¯å·®ä¼ å¯¼æ¨¡å‹æ„å»º

ç§»åŠ¨æœºå™¨äººé‡Œç¨‹è®¡çš„ä½œç”¨æ˜¯é€šè¿‡è§‚å¯Ÿè‡ªèº«è½¦è½®çš„è½¬é€Ÿå€¼ï¼Œç»ç”±æœºå™¨äººè¿åŠ¨å­¦æ¨¡å‹ï¼Œæ¨æ¼”å‡ºæœºå™¨äººå½“å‰çš„ä½ç½®å’Œæ–¹å‘è§’ä¿¡æ¯ã€‚ä½†ç”±äºæ•°å€¼ç§¯åˆ†è¯¯å·®ã€è¿åŠ¨å­¦å‚æ•°è¯¯å·®ä»¥åŠè½¦è¾†å¯èƒ½å‘ç”Ÿä¾§æ»‘ç­‰åŸå› ï¼Œè½®å¼é‡Œç¨‹è®¡çš„ä¿¡æ¯ä¼šå­˜åœ¨ä¸€å®šè¯¯å·®ï¼Œå¹¶ä¸”è¯¯å·®ä¼šä¸€ç›´ç´¯ç§¯ï¼Œæœ€ç»ˆæ— æ³•æ»¡è¶³åº”ç”¨ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¸å…¶å®ƒå®šä½ä¿¡æ¯èåˆå¾—åˆ°è¾ƒå‡†ç¡®çš„ç»“æœã€‚å‰è½¦é‡Œç¨‹è®¡çš„æ¨¡å‹ä¸»è¦æœ‰ä¸€é˜¶æ¬§æ‹‰æ³•ã€è§£æç§¯åˆ†æ³•å’ŒäºŒé˜¶Runge-Kuttaæ³•ã€‚

### ä¸€é˜¶é‡Œç¨‹è®¡æ¨¡å‹â€”â€”æ¬§æ‹‰æ³•

1. **ç†è®ºæ¨å¯¼**

ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œå°†ä¹‹å‰çš„å‰è½¦æ¨¡å‹é‡æ–°å™è¿°å¦‚ä¸‹ï¼Œ

$$
\left\{\begin{aligned}
\dot{x_R}&=r\dot{\varphi}\sin{\beta(t)}\\
\dot{\theta_R}&=r\dot{\varphi}\cdot(-\frac{\cos{\beta(t)}}{l})
\end{aligned}
\right.
$$

æœºå™¨äººåœ¨ä¸–ç•Œåæ ‡ç³»ä¸æœºå™¨äººåæ ‡ç³»ä¸‹çŠ¶æ€å˜é‡çš„å…³ç³»ä¸ºï¼Œ

$$
\left\{\begin{aligned}
\dot{x_I}&=\dot{x_R}\cos{\theta}=v\cos{\theta}\\
\dot{y_I}&=\dot{x_R}\sin{\theta}=v\sin{\theta}\\
\dot{\theta_I}&=\dot{\theta_R}=\omega
\end{aligned}
\right.
$$

åœ¨çŸ­æš‚çš„ç¦»æ•£åŒ–æ—¶é—´æ®µ$T_s$å†…ï¼Œæœºå™¨äººä½å§¿è¿‘ä¼¼åŒ€é€Ÿå˜åŒ–ï¼Œå¯ä»¥å¾—åˆ°é€’æ¨å…³ç³»å¦‚ä¸‹ï¼Œ

$$
\left\{\begin{aligned}
x_{k+1}&=x_k+v_k\cos{\theta_k}\cdot T_s\\
y_{k+1}&=y_k+v_k\sin{\theta_k}\cdot T_s\\
\theta_{k+1}&=\theta_k+\omega\cdot T_s
\end{aligned}
\right.
$$

å‡è®¾å‰è½®è½¬è¿‡çš„è§’åº¦ä¸º$\Delta\Phi$ï¼Œå¯ä»¥ç”¨ç ç›˜è¯»æ•°è¡¨ç¤ºæœºå™¨äººåæ ‡ç³»ä¸‹çš„ä½å§¿å˜åŒ–ï¼ˆæ³¨ï¼Œè¿™é‡Œçš„$\beta$ä¸ºå®šå€¼ï¼‰ï¼Œ

$$
\left\{\begin{aligned}
\Delta s_k&=v_k\cdot T_s=r\dot{\varphi}\sin{\beta}\cdot T_s=r\sin{\beta}\cdot\Delta\Phi\\
\Delta\theta_k&=\omega_k\cdot T_s=r\dot{\varphi}\cdot(-\frac{\cos{\beta}}{l})\cdot T_s=-\frac{r}{l}\cos{\beta}\cdot\Delta\Phi
\end{aligned}
\right.
$$

ä»£å…¥åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹å¾—åˆ°ä½å§¿å˜æ¢å…¬å¼ä¸ºï¼Œ

$$
\left\{\begin{aligned}
x_{k+1}&=x_k+r\sin{\beta}\cdot\Delta\Phi\cdot\cos{\theta_k}\\
y_{k+1}&=y_k+r\sin{\beta}\cdot\Delta\Phi\cdot\sin{\theta_k}\\
\theta_{k+1}&=\theta_k+\Delta\theta=\theta_k-\frac{r}{l}\cos{\beta}\cdot\Delta\Phi
\end{aligned}
\right.
$$

1. **è¯¯å·®åˆ†æ**

è®¾é‡Œç¨‹è®¡æ›´æ–°åçš„ä½å§¿ä¸ºï¼Œ

$$
p_{k+1}=f(x_k,y_k,\theta_k,\Delta\Phi)
$$

é‡Œç¨‹è®¡è¯¯å·®ä¼ å¯¼å‡½æ•°ä¸ºï¼Œ

$$
\sum\nolimits_{p_{k+1}}=\nabla_{p_k}f\cdot\sum\nolimits_{p_k}\cdot\nabla_{p_k}f^T+\nabla_{rl}f\cdot\sum\nolimits_{\Delta}\cdot\nabla_{rl}f^T
$$

å…¶ä¸­$\nabla_{p_k}l$ä¸º$p_{k+1}$å¯¹$x_k$ï¼Œ$y_k$å’Œ$\theta_k$çš„é›…å¯æ¯”çŸ©é˜µï¼Œ

$$
\nabla_{p_k}f=
\begin{bmatrix}
\dfrac{\partial f}{\partial x_k}&
\dfrac{\partial f}{\partial y_k}&
\dfrac{\partial f}{\partial \theta_k}
\end{bmatrix}
=\begin{bmatrix}
1 & 0 & -\Delta s\cdot\sin{\theta_k} \\
0 & 1 & \Delta s\cdot\cos{\theta_k} \\
0 & 0 & 1 \\
\end{bmatrix}
$$

è€Œ$\nabla_{rl}l$ä¸º$p_{k+1}$å¯¹$\Delta\Phi$çš„é›…å¯æ¯”çŸ©é˜µï¼Œ

$$
\nabla_{rl}f=\begin{bmatrix}
\dfrac{\partial f}{\partial \Delta\Phi}
\end{bmatrix}=\begin{bmatrix}
r\sin{\beta}\cdot\cos{\theta_k}\\
r\sin{\beta}\cdot\sin{\theta_k}\\
-\dfrac{r}{l}\cos{\beta}
\end{bmatrix}

$$

### äºŒé˜¶é‡Œç¨‹è®¡æ¨¡å‹â€”â€”Runge-Kuttaæ³•

ä¸æ¬§æ‹‰æ³•ä¸åŒçš„æ˜¯ï¼ŒRunge-Kuttaæ³•å°†$\theta_k$å˜æˆäº†$\theta_k+\dfrac{1}{2}\Delta\theta$ï¼Œå½±å“ä¸‹ä¸€æ‹çš„$x$å’Œ$y$çš„ä¼°è®¡ï¼Œä¸å½±å“è§’åº¦$\theta$çš„ä¼°è®¡ã€‚

1. **ç†è®ºæ¨å¯¼**

æ ¹æ®ä¸Šè¿°åˆ†æï¼Œåœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ä½å§¿å˜åŒ–é€’æ¨å¼ä¸ºï¼Œ

$$
\left\{\begin{aligned}
x_{k+1}&=x_k+\Delta s_k\cdot\cos{(\theta_k+\dfrac{1}{2}\Delta\theta_k)}\\
y_{k+1}&=y_k+\Delta s_k\cdot\sin{(\theta_k+\dfrac{1}{2}\Delta\theta_k)}\\
\theta_{k+1}&=\theta_k-\dfrac{r}{l}\cos{\beta}\cdot{\Delta\Phi}
\end{aligned}
\right.
$$

å…¶ä¸­ï¼Œ

$$
\left\{\begin{aligned}
\Delta s_k&=r\sin{\beta}\cdot\Delta\Phi\\
\Delta\theta_k&=-\frac{r}{l}\cos{\beta}\cdot\Delta\Phi
\end{aligned}
\right.
$$

1. **è¯¯å·®åˆ†æ**

ä¸‹ä¸€æ‹çš„é‡Œç¨‹è®¡ä½å§¿ä¼°è®¡çš„åæ–¹å·®çŸ©é˜µåŒæ¬§æ‹‰æ³•ï¼Œä¸ºï¼Œ

$$
\sum\nolimits_{p_{k+1}}=\nabla_{p_k}f\cdot\sum\nolimits_{p_k}\cdot\nabla_{p_k}f^T+\nabla_{rl}f\cdot\sum\nolimits_{\Delta}\cdot\nabla_{rl}f^T
$$

å…¶ä¸­ï¼Œ

$$
\nabla_{p_k}f=\begin{bmatrix}
1 & 0 & -\Delta s\cdot\sin{(\theta_k+\dfrac{1}{2}\Delta\theta_k)} \\
0 & 1 & \Delta s\cdot\cos{(\theta_k+\dfrac{1}{2}\Delta\theta_k)} \\
0 & 0 & 1 \\
\end{bmatrix}
$$

è€Œ

$$
\nabla_{rl}f=\begin{bmatrix}\dfrac{\partial f}{\partial \Delta\Phi}
\end{bmatrix}=\begin{bmatrix}
r\sin{\beta}\cos{(\theta_k+\dfrac{1}{2}\Delta\theta_k)}-\Delta s\sin{(\theta_k+\dfrac{1}{2}\Delta\theta_k)}\cdot(-\dfrac{r}{l}\cos{\beta})\\
r\sin{\beta}sin{(\theta_k+\dfrac{1}{2}\Delta\theta_k)}+\Delta s\cos{(\theta_k+\dfrac{1}{2}\Delta\theta_k)}\cdot(-\dfrac{r}{l}\cos{\beta})\\
-\dfrac{r}{l}\cos{\beta}\\
\end{bmatrix}
$$

## åˆ©ç”¨Runge-Kuttaæ³•è¿›è¡Œé‡Œç¨‹è®¡ä»¿çœŸ

åˆ©ç”¨MATLABå¯¹å‰è½¦æœºå™¨äººçš„é‡Œç¨‹è®¡æ¨¡å‹è¿›è¡Œä»¿çœŸï¼Œç›¸å…³é…ç½®å‚æ•°å¦‚ä¸‹ï¼š

```matlab
% å‚æ•°åˆå§‹åŒ–
l = 1;        % ä¸»åŠ¨è½®åˆ°æœºå™¨äººä¸­å¿ƒè·ç¦»
r = 0.2;      % ä¸»åŠ¨è½®åŠå¾„
dphi = 6;     % ä¸»åŠ¨è½®æ—‹è½¬è§’é€Ÿåº¦
dt = 0.1;     % æ—¶é—´æ­¥é•¿
beta = 3*pi/4;  % ä¸»åŠ¨è½®è½¬è§’

x = 0;          % åˆå§‹xåæ ‡
y = 0;          % åˆå§‹yåæ ‡
theta = 0;      % åˆå§‹è§’åº¦
Cp = zeros(3);  % åˆå§‹è¯¯å·®çŸ©é˜µ

phi = dphi * dt;  %å•ä½æ—¶é—´è½¬è¿‡è§’åº¦
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæœºå™¨äººä»åŸç‚¹æ²¿ç€xè½´æ­£æ–¹å‘å‡ºå‘ï¼Œå…¶ä¸­ï¼Œ

- é©±åŠ¨è½®åˆ°æœºå™¨äººä¸­å¿ƒè·ç¦»ä¸º`1m`ï¼Œ
- é©±åŠ¨è½®åŠå¾„ä¸º`0.2m`ï¼Œ
- é©±åŠ¨è½®è½¬é€Ÿä¸º`6rad/s`ï¼Œ
- ä¸»åŠ¨è½®è½¬è§’ä¿æŒä¸º`3*pi/4rad`ï¼Œå®é™…ä¸Šæ˜¯æœå‘å·¦å‰æ–¹45åº¦ã€‚

æ¥ç€æ˜¯ä»¿çœŸå¾ªç¯éƒ¨åˆ†ï¼Œè¯¥éƒ¨åˆ†éœ€è¦è®¡ç®—ç›¸å…³çš„åçŠ¶æ€çŸ©é˜µï¼Œå¹¶ç»˜åˆ¶åçŠ¶æ€æ¤­åœ†ï¼Œå³æ ¹æ®$diag(\sigma_x^2,\sigma_y^2,\sigma_\theta^2 )$è¿›è¡Œç»˜åˆ¶ï¼Œç¼–å†™ä»£ç å¦‚ä¸‹ï¼Œ

```matlab
plot(x,y,'ro','MarkerFaceColor','r');
for t = 0:dt:6
    oldx = x;
    oldy = y;
    % å‰è½¦æœºå™¨äººæ­£è¿åŠ¨å­¦
    ds = r * sin(beta) * phi;
    dtheta = (-r/l) * cos(beta) * phi;
    dx = ds * cos(theta + dtheta/2);
    dy = ds * sin(theta + dtheta/2);
    % è½¦è½®è¯¯å·®
    Cw = abs(phi);

    % é›…å¯æ¯”çŸ©é˜µ
    Pp = [1, 0, -ds * sin(theta + dtheta/2);
          0, 1,  ds * cos(theta + dtheta/2); 
          0, 0, 1];
    Pw = [r * sin(beta) * cos(theta + dtheta/2) - 
                    ds * sin(theta + dtheta/2)*(-r/l)*cos(beta);
          r * sin(beta) * sin(theta + dtheta/2) + 
              ds * cos(theta + dtheta/2)*(-r/l)*cos(beta);
          (-r/l) * cos(beta)];

    % æ›´æ–°æœºå™¨äººä½å§¿
    x = x + dx;
    y = y + dy;
    theta = theta + dtheta;
    % æ›´æ–°è¯¯å·®çŸ©é˜µ
    Cp = Pp * Cp * Pp' + Pw * Cw * Pw';
    %ç»˜åˆ¶
    plot([oldx x], [oldy y], 'k.-');
    quiver(x,y,cos(theta),sin(theta),'r','AutoScaleFactor',0.3);
    % ç»˜åˆ¶åçŠ¶æ€æ¤­åœ†æ—¶ä½¿ç”¨å½“å‰çš„æœºå™¨äººå§¿æ€
    ellipse_x = Cp(1,1) .* cos(0:0.01:2*pi);
    ellipse_y = Cp(2,2) .* sin(0:0.01:2*pi);
    rot = [cos(theta), -sin(theta); sin(theta), cos(theta)];
    ellipse_dxy = rot * [ellipse_x; ellipse_y];
    plot(x + ellipse_dxy(1,:), y + ellipse_dxy(2,:), '--');
end
```

ä»£ç æœ€ç»ˆçš„è¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ

![fig.svg](assets/media/fig.svg)

å¯ä»¥å‘ç°ï¼Œéšç€æœºå™¨äººèµ°çš„è·¯ç¨‹è¶Šé•¿ï¼Œè¯¯å·®çš„æ–¹å·®å°±ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¹Ÿå°±æ˜¯è¯´æœºå™¨äººå¯èƒ½ä¼šå‡ºç°åœ¨æ¤­åœ†ä¸­çš„ä»»ä½•ä¸€ä¸ªç‚¹ï¼Œä¸ç¡®å®šæ€§å¤ªå¤§äº†ï¼Œæ‰€ä»¥åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦å’Œå…¶å®ƒå®šä½æ–¹å¼è¿›è¡Œé…åˆæ ¡å‡†ã€‚

å¦å¤–ï¼Œåœ¨å®éªŒè¿‡ç¨‹ä¸­è¿˜å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå³åˆå§‹$\theta$ä»¥åŠ$\beta$çš„æ”¹å˜ä¹Ÿä¼šå½±å“åçŠ¶æ€æ¤­åœ†çš„å˜åŒ–æƒ…å†µï¼Œä¸ºäº†æ¢ç©¶è§„å¾‹ä¸€å…±æˆªäº†6å¼ å›¾ï¼ˆæ³¨ï¼Œç¬¬ä¸€è¡Œ$\beta=\pi/2$ï¼Œç¬¬äºŒè¡Œ$\beta=\pi/4$ï¼›ç¬¬ä¸€åˆ—$\theta=0$ï¼Œç¬¬äºŒåˆ—$\theta=\pi/4$ï¼Œç¬¬ä¸‰åˆ—$\theta=\pi/2$ï¼‰ï¼Œ

![Untitled](assets/media/Untitled%207.png)

![Untitled](assets/media/Untitled%208.png)

![Untitled](assets/media/Untitled%209.png)

![Untitled](assets/media/Untitled%2010.png)

![Untitled](assets/media/Untitled%2011.png)

![Untitled](assets/media/Untitled%2012.png)

åœ¨æ²¿ç€ç›´çº¿è¿åŠ¨æ—¶ï¼Œå’ŒPPTä¸Šçš„ç»“æœä¸å¤ªç›¸åŒï¼Œå¯èƒ½æ˜¯ç”±äºå‰è½¦æœºå™¨äººåªæœ‰ä¸€ä¸ªé©±åŠ¨è½®çš„ç¼˜æ•…ï¼Œåœ¨æ–¹å‘ä¸Šä¸ä¼šæœ‰æ‰€åå·®ï¼Œåªä¼šåœ¨è·ç¦»ä¸Šæœ‰åå·®ï¼Œä½†æ˜¯åé¢åˆå‘ç°æ”¹äº†æœºå™¨äººè¿åŠ¨æ–¹å‘åï¼ŒåçŠ¶æ€æ¤­åœ†ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œç›®å‰åŸå› æœªçŸ¥ã€‚

# SVDå’ŒICPç‚¹äº‘åŒ¹é…ç®—æ³•

åœ¨æœºå™¨äººçš„ç§»åŠ¨è¿‡ç¨‹ä¸­ï¼Œå®ƒéœ€è¦é€šè¿‡æ¿€å…‰é›·è¾¾æ”¶é›†åˆ°çš„ç‚¹äº‘æ•°æ®ä¸æ–­ä¸é¢„å…ˆæ„å»ºå¥½çš„åœ°å›¾è¿›è¡ŒåŒ¹é…ä»è€Œç¡®å®šè‡ªèº«å½“å‰çš„ä½ç½®ï¼Œå¹¶æ®æ­¤è¿›è¡Œå¯¼èˆªå’Œè·¯å¾„è§„åˆ’ï¼Œè€Œç‚¹äº‘åŒ¹é…å°±æ˜¯ä¸ºäº†å®Œæˆè¿™ä¸€ä»»åŠ¡ï¼Œå…·ä½“æ¥è¯´ï¼Œå®ƒè€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹äºä¸¤ç»„ç‚¹äº‘æ•°æ®$P=\{p_1,p_2,\cdots,p_n\}$å’Œ$Q=\{q_1,q_2,\cdots,q_n\}$ï¼Œéœ€è¦æ±‚è§£å‡º$P$åˆ°$Q$çš„å˜æ¢çŸ©é˜µï¼Œä½¿å¾—ä¸¤ç»„ç‚¹äº‘ä¹‹é—´çš„è¯¯å·®æœ€å°ï¼Œå…¶ä¼˜åŒ–ç›®æ ‡å®šä¹‰ä¸ºï¼š

$$
(R,t)=\argmin\sum_{i=1}^{n}\omega_i||(Rp_i+t)-q_i||^2=\argmax{F}
$$

å…¶ä¸­ï¼Œ$\omega_i$è¡¨ç¤ºç¬¬$i$ä¸ªç‚¹çš„æƒé‡ï¼Œç”¨è§‚æµ‹ç‚¹æ–¹å·®çš„å€’æ•°æ¥è¡¨ç¤ºï¼›$R$ä¸ºæ—‹è½¬å˜æ¢çŸ©é˜µï¼Œ$t$ä¸ºå¹³ç§»å˜æ¢å‘é‡ã€‚$R$å’Œ$t$ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦æ±‚çš„å¯¹è±¡ã€‚

ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œåˆ†åˆ«æ˜¯SVDç®—æ³•å’ŒICPç®—æ³•ã€‚

## SVDå’ŒICPç®—æ³•ç†è®ºæ¨å¯¼

### å¥‡å¼‚å€¼åˆ†è§£â€”â€”SVDæ–¹æ³•æ¨å¯¼

ä¸ºäº†æ±‚å¾—ä¼˜åŒ–ç›®æ ‡å…¬å¼çš„æœ€å°å€¼å¯¹åº”çš„$R$å’Œ$t$ï¼Œé¦–å…ˆå°†å…¶å¯¹$t$è¿›è¡Œæ±‚å¯¼å¾—ï¼Œ

$$
\frac{\partial{F}}{\partial{t}}=2t\left(\sum_{i=1}^{n}\omega_i\right)+2R\left(\sum_{i=1}^{n}\omega_ip_i\right)-2\sum_{i=1}^{n}\omega_iq_i=0
$$

ä¸¤è¾¹åŒæ—¶é™¤ä»¥$\sum_{i=1}^{n}\omega_i$å¾—ï¼ˆçº¦å»2ï¼‰ï¼Œ

$$
t+R\hat{p}-\hat{q}=0
$$

å…¶ä¸­ï¼Œ

$$
\hat{p}=\frac{\sum_{i=1}^n\omega_ip_i}{\sum_{i=1}^n\omega_i}\qquad \hat{q}=\frac{\sum_{i=1}^n\omega_iq_i}{\sum_{i=1}^n\omega_i}
$$

åˆ†åˆ«ä¸ºç‚¹é›†$P$å’Œç‚¹é›†$Q$çš„åŠ æƒä¸­å¿ƒï¼Œæœ€ç»ˆå¾—åˆ°

$$
t=\hat{q}-R\hat{p}
$$

å°†ä¸Šè¿°å…¬å¼å¸¦å›åˆ°ä¼˜åŒ–ç›®æ ‡ï¼Œå¹¶**å»ä¸­å¿ƒåŒ–**å¾—ï¼Œ

$$
F=\sum_{i=1}^{n}\omega_i||(Rp_i+\hat{q}-R\hat{p})-q_i||^2=\sum_{i=1}^{n}||Rx_i-y_i||^2
$$

å…¶ä¸­ï¼Œ

$$
x_i=p_i-\hat{p}\qquad y_i=q_i-\hat{q}
$$

å»ä¸­å¿ƒåŒ–ä¹Ÿå°±æ˜¯å°†ä¸¤ä¸ªç‚¹äº‘çš„è´¨å¿ƒä½ç½®é‡åˆï¼Œæ¥ç€æ±‚è§£$R$ï¼Œå¯¹äºè§‚æµ‹ç‚¹$i$æ¥è¯´ï¼Œæ¬§æ°è¯¯å·®ä¸ºï¼Œ

$$
\begin{aligned}||Rx_i-y_i||^2&=(Rx_i-y_i)^T(Rx_i-y_i)\\
&=x_i^TR^TRx_i-y_i^TRx_i-x_i^TR^Ty_i+y_i^Ty_i
\end{aligned}
$$

ç”±äº$R$ä¸ºæ—‹è½¬çŸ©é˜µï¼Œä¸ºæ ‡å‡†æ­£äº¤é˜µï¼Œæ»¡è¶³$R^TR=I$ï¼Œè€Œ$y_i^TRx_i$å’Œ$x_i^TRy_i$å‡ä¸ºæ ‡é‡`ï¼ˆ1*3Ã—3*3Ã—3*1ï¼‰`

æ‰€ä»¥ä¸Šå¼å¯ä»¥åŒ–ç®€ä¸ºï¼Œ

$$
||Rx_i-y_i||^2=x_i^Tx_i-2y_i^TRx_i+y_i^Ty_i
$$

äºæ˜¯ä¼˜åŒ–ç›®æ ‡å˜æˆï¼Œ

$$
(R,t)=\argmin{\left(\sum_{i=1}^n\omega_ix_i^Tx_i-2\sum_{i=1}^n\omega_iy_i^TRx_i+\sum_{i=1}^n\omega_iy_i^Ty_i\right)}
$$

å…¶ä¸­ç¬¬ä¸€é¡¹å’Œç¬¬ä¸‰é¡¹ä¸$R$æ— å…³ï¼Œæ‰€ä»¥æœ€ç»ˆä¼˜åŒ–ç›®æ ‡å³ï¼Œ

$$
(R,t)=\argmax{\left(\sum_{i=1}^{n}\omega_iy_i^TRx_i\right)}
$$

å¯¹ä¸Šå¼è¿›è¡Œå˜æ¢å¾—ï¼Œ

$$
(R,t)=\argmax(\text{tr}(WY^TRX))
$$

å…¶ä¸­$W=\text{diag}(\omega_1,\omega_2,\cdots,\omega_n)$ï¼Œ$X=[x_1,x_2,\cdots,x_n]$ï¼Œ$Y=[y_1,y_2,\cdots,y_n]$ã€‚

æ ¹æ®SVDåŸç†ï¼Œ

$$
\begin{aligned}\text{tr}(WY^TRX)&=\text{tr}(RXWY^T)=\text{tr}(RU\Sigma V^T)\\
&=\text{tr}(\Sigma V^TRU)=\text{tr}(\Sigma M)
\end{aligned}
$$

å…¶ä¸­$U$å’Œ$V$ä¸ºå•ä½æ­£äº¤é˜µï¼Œ$\Sigma$ä¸ºå¯¹è§’é˜µï¼Œ$M$ä¸ºæ­£äº¤çŸ©é˜µï¼Œäºæ˜¯æœ‰ï¼Œ

$$
\begin{aligned}
\text{tr}(\Sigma M)&=\text{tr}\left(\begin{bmatrix}
\sigma_1 & & & \\
& \sigma_2 & & \\
& & \ddots & \\
& & & \sigma_3
\end{bmatrix}
\begin{bmatrix}
m_{11} & m_{12}  & \cdots   & m_{1n}   \\
m_{21} & m_{22}  & \cdots   & m_{2n}  \\
\vdots & \vdots  & \ddots   & \vdots  \\
m_{n1} & m_{n2}  & \cdots\  & m_{nn}  \\
\end{bmatrix}\right)\\
&=\sum_{i=1}^{n}\sigma_im_{ii}\leq\sum_{i=1}^{n}\sigma_i
\end{aligned}
$$

å…¶ä¸­$m_{ii}\leq1$ï¼Œä¸Šå¼ç­‰å·å½“ä¸”ä»…å½“$M=I$æ—¶æˆç«‹ï¼Œæ­¤æ—¶å–æœ€å¤§å€¼ï¼Œäºæ˜¯å¾—åˆ°

$$
R=VU^T
$$

æœ€å°åŒ¹é…è¯¯å·®

$$
\min{F}=\sum_{i=1}^n\omega_ix_i^Tx_i-2\sum_{i=1}^n\sigma_i+\sum_{i=1}^n\omega_iy_i^Ty_i
$$

### è¿­ä»£æœ€è¿‘ç‚¹â€”â€”ICPæ–¹æ³•

ç”±äºé€šå¸¸ä¸çŸ¥é“ä¸¤ä¸ªç‚¹äº‘é›†åˆä¸­å“ªäº›ç‚¹æ˜¯å¯¹åº”ç‚¹ï¼Œæƒ³è¦ç”¨SVDç®—æ³•ä¸€æ¬¡æ€§æ±‚å‡ºå˜æ¢çŸ©é˜µæ˜¯ä¸ç°å®çš„ï¼Œæ‰€ä»¥æœ‰äº†ICPç®—æ³•ï¼Œå®ƒæœ€ä¸»è¦çš„ç‰¹ç‚¹å°±æ˜¯å…ˆå‡å®šå°†ç‚¹äº‘æ•°æ®ä¸­è·ç¦»æŸä¸€ç‚¹æœ€è¿‘çš„ç‚¹ä½œä¸ºå…¶å¯¹åº”ç‚¹ï¼Œæ¥ç€é€šè¿‡è¿­ä»£çš„æ–¹å¼é€æ­¥ä¼˜åŒ–å˜æ¢å‚æ•°ï¼Œæœ€ç»ˆä½¿å¾—ä¸¤ä¸ªç‚¹äº‘ä¹‹é—´çš„å¯¹åº”ç‚¹å¯¹é½ï¼Œå®ƒçš„å…·ä½“ç®—æ³•æµç¨‹å¦‚ä¸‹ï¼Œ

---

è¾“å…¥ï¼š

- åŸå§‹ç‚¹é›†`P` & è§‚æµ‹ç‚¹é›†`Q` & `Q` ä¸­æ‰€æœ‰ç‚¹çš„æƒé‡å¯¹è§’çŸ©é˜µ`W` ï¼›
- åˆå§‹åŒ–å˜æ¢çŸ©é˜µ`R_0`å’Œ`t_0`,è®¾ç½®è¯¯å·®é˜ˆå€¼`th` ã€‚

å¾ªç¯ï¼š

while(error > th) do:

**Find Closest Point**

åˆ©ç”¨åˆå§‹å˜æ¢`R_0`å’Œ`t_0` ï¼Œæˆ–è€…ä¸Šæ¬¡è¿­ä»£è·å–çš„`R_{k-1}`å’Œ`t_{k-1}` å¯¹ç‚¹äº‘`P` è¿›è¡Œå˜æ¢ï¼Œå¾—åˆ°ä¸€ä¸ªä¸´æ—¶çš„å˜æ¢ç‚¹äº‘ï¼Œå†å°†è¯¥ç‚¹äº‘ä¸ç›®æ ‡ç‚¹äº‘`Q` è¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾å‡º`P` ä¸­æ¯ä¸€ä¸ªç‚¹åœ¨`Q` ä¸­æœ€è¿‘é‚»çš„ç‚¹ã€‚

**Find Best Transform**

æ ¹æ®ä¸Šä¸€æ­¥éª¤ä¸­å¾—åˆ°çš„ä¸¤ç‚¹é›†ä¸­ç‚¹çš„å¯¹åº”å…³ç³»ï¼Œå€Ÿç”¨SVDæ–¹æ³•æ±‚è§£æ–°çš„`R`å’Œ`t` ï¼ŒåŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼Œ

- ç‚¹é›†`P` å’Œç‚¹é›†`Q` çš„åˆ†åˆ«å»ä¸­å¿ƒåŒ–ï¼Œ`X=P-\hat{P}` ï¼Œ`X=Q-\hat{Q}`
- è®¡ç®—`S` ï¼Œ`S=XWY^T`
- å¯¹`S` è¿›è¡Œå¥‡å¼‚å€¼åˆ†è§£ï¼Œ`[U,Î£,V]=svd(S)`
- æ±‚å‡ºæœ€ä¼˜æ—‹è½¬`R` ï¼Œ`R=VU^T`
- è®¡ç®—æœ€ä¼˜å¹³ç§»`t` ï¼Œ`t=\hat{Q}-R\hat{P}`
- æ±‚å‡ºé˜¶æ®µå˜æ¢çŸ©é˜µ`Tt` ï¼Œ`Tt=[R,t;0 0 0 1]`
- è®¡ç®—ç´¯è®¡å˜æ¢çŸ©é˜µ`T` ï¼Œ`T=TÂ·Tt`

**Calculate error**

è¯¯å·®å³ç‚¹é›†`P`å’Œç‚¹é›†`Q` å¯¹åº”ç‚¹çš„æ¬§å¼è·ç¦»å¹³æ–¹å’Œã€‚

è¾“å‡ºï¼š

- æœ€ä¼˜æ—‹è½¬`R*` ï¼Œæœ€ä¼˜å¹³ç§»`t*`

---

## åˆ©ç”¨ICPç®—æ³•è¿›è¡Œç‚¹äº‘åŒ¹é…ä»¿çœŸ

### ä»¿çœŸä»»åŠ¡è®¾è®¡

ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤ºICPç®—æ³•ï¼Œä»¿çœŸå®éªŒé€‰æ‹©åœ¨äºŒç»´å¹³é¢ä¸Šè¿›è¡Œï¼Œçº¢è‰²ç‚¹é›†ä¸ºPé›†åˆï¼Œè“è‰²ç‚¹é›†ä¸ºQé›†åˆï¼Œå…¶ä¸­Pé›†åˆä¸ºä¸€æ¡$y=x^2$çš„æŠ›ç‰©çº¿ï¼ŒPåˆ°Qçš„å˜æ¢ä¸ºï¼š

```matlab
theta_0 = pi/8;  t_0 = [-0.4, 0.4]; 
```

æ ¹æ®ä»¥ä¸Šå‚æ•°å¯ä»¥æ±‚å‡ºç‚¹é›†På˜æ¢åˆ°Qçš„çœŸå®å˜æ¢çŸ©é˜µï¼š

$$
tran_r=\begin{bmatrix}
0.9239&-0.3827&-0.4\\
0.3827&0.9239&0.4\\
0&0&1
\end{bmatrix}
$$

å…¶ä½™å‚æ•°è®¾ç½®å¦‚ä¸‹ï¼Œ

| å‚æ•°          | æè¿°         | å€¼   |
| ------------- | ------------ | ---- |
| num_points    | ç‚¹é›†æ•°é‡     | 100  |
| th            | è¯¯å·®é˜ˆå€¼     | 1e-6 |
| max_iteration | æœ€å¤§è¿­ä»£æ¬¡æ•° | 40   |
| noise         | å™ªå£°         | 0.02 |

### ç»“æœåˆ†æ

åœ¨ä¸Šè¿°åŸºç¡€ä¸Šï¼Œé€šè¿‡ICPç®—æ³•å¾—åˆ°çš„ç‚¹äº‘æœ€ç»ˆåŒ¹é…ç»“æœå›¾åƒå¦‚ä¸‹ï¼Œ

![fig1.svg](assets/media/fig1.svg)

å…¶ä¸­ç»¿è‰²ç‚¹é›†ä¸ºPç»è¿‡ICPç®—æ³•è½¬åŒ–å¾—åˆ°çš„ç‚¹äº‘ç»“æœï¼Œå¯ä»¥çœ‹è§å…¶ä¸è“è‰²ç‚¹é›†ï¼ˆä¹Ÿå³ç›®æ ‡ç‚¹äº‘ï¼‰é…å‡†ç¨‹åº¦è¾ƒé«˜ï¼Œè™½ç„¶æ²¡æœ‰å®Œç¾åŒ¹é…ï¼Œä½†ç»“æœä¹Ÿè¾ƒä¸ºç†æƒ³ã€‚

æœ€ç»ˆçš„è¿­ä»£è¯¯å·®ï¼ˆå¯¹åº”ç‚¹é—´çš„å¹³å‡è·ç¦»ï¼‰ä¸º`0.019664`ï¼Œè®¡ç®—å¾—åˆ°çš„å˜æ¢çŸ©é˜µå¦‚ä¸‹ï¼Œ

$$
tran_p=\begin{bmatrix}
0.9014&-0.4329&-0.4237\\
0.4329&0.9014&0.3007\\
0&0&1
\end{bmatrix}
$$

ä¸çœŸå®çš„å˜æ¢çŸ©é˜µæ¯”è¾ƒæ¥è¿‘ã€‚

å¦å¤–åœ¨å®éªŒè¿‡ç¨‹ä¸­è¿˜é‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç”»å›¾æ—¶å‘ç°Qç‚¹é›†æ•°é‡å˜å°‘äº†ï¼Œç›¸å…³ä»£ç å¦‚ä¸‹ï¼š

```matlab
    [idx, dist] = knnsearch(Q',P_trans');
    Q = Q(:,idx);
```

åˆ†æé—®é¢˜å‘ç°åŸå› æ˜¯Qç‚¹é›†ä¸­çš„æŸä¸ªç‚¹ä¸Pç‚¹é›†ä¸­å¤šä¸ªç‚¹çš„è·ç¦»å‡ä¸ºæœ€å°ï¼Œå¦‚æœç›´æ¥è¿™æ ·èµ‹å€¼`Q = Q(:,idx);` å°±ä¼šå¯¼è‡´Qå€¼æ•°é‡å‡å°‘ï¼Œæ‰€ä»¥åº”è¯¥æ”¹ä¸º`Q_mid = Q(:,idx);`

å¦ä¸€ä¸ªé—®é¢˜æ˜¯åœ¨å®éªŒä¸­å‘ç°è¿­ä»£ä¸€æ¬¡å°±æ‰¾åˆ°äº†æœ€ä¼˜çš„å˜æ¢çŸ©é˜µï¼Œ

```matlab
Q = R_0 * P + repmat(t_0, 1, num_points);
```

æœ€åå‘ç°ä¸€å¼€å§‹åˆ›å»ºç‚¹äº‘çš„æ—¶å€™å°±è®¾å®šäº†Pç‚¹äº‘å’ŒQç‚¹äº‘çš„åŒ¹é…å…³ç³»ï¼Œåç»­è®¡ç®—éƒ½æŒ‰ç…§è¿™ç§åŒ¹é…å…³ç³»è¿›è¡Œï¼Œæ‰€ä»¥ä¸€æ¬¡å°±æ‰¾åˆ°äº†æœ€ä¼˜å˜æ¢çŸ©é˜µï¼Œä½†å®é™…æƒ…å†µä¸­å¹¶ä¸çŸ¥é“ç‚¹ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œå¦‚å°†Qç‚¹é›†æ‰“ä¹±æˆ–è€…å¢åŠ æœ€è¿‘é‚»åŒ¹é…æ–¹æ³•å°±ä¸ä¼šå‡ºç°ä¸Šè¿°ç°è±¡ã€‚

æ­¤å¤–ï¼Œèµ·åˆé˜¶æ®µåˆ©ç”¨ICPç®—æ³•è®¡ç®—å‡ºæ¥çš„ç»“æœå‡ä¸æ˜¯å¾ˆç†æƒ³ï¼Œéå¸¸å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ï¼Œä»¥ä¸ºæ˜¯ä»£ç é—®é¢˜ï¼Œåæ¥å‘ç°æ˜¯ä¸åˆå§‹å˜æ¢çŸ©é˜µçš„è®¾ç½®æœ‰å…³ç³»ï¼Œå¦‚æœä¸¤ä¸ªç‚¹äº‘ä¹‹é—´çš„å¤¹è§’è¾ƒå°æ—¶ï¼Œæ›´å®¹æ˜“è¿›è¡ŒåŒ¹é…ï¼Œåä¹‹å¦‚æœå¤¹è§’æ¥è¿‘90åº¦ï¼Œåˆ™åŒ¹é…æ•ˆæœä¸ä½³ï¼Œå¯ä»¥ä»ä¸‹é¢å‡ å¼ å›¾ä¸­çœ‹å‡ºæ¥ï¼Œå¹³ç§»å‘é‡å‡ä¸º`[-0.4;0.4]` ï¼Œæ—‹è½¬è§’åº¦ä¾æ¬¡ä¸º0åº¦ï¼Œ45åº¦ï¼Œ90åº¦ï¼Œ180åº¦ï¼ŒåŒ¹é…å›¾åƒå¦‚ä¸‹ï¼Œ

è®¡ç®—å˜æ¢çŸ©é˜µå¦‚ä¸‹ï¼š

![fig2.svg](assets/media/fig2.svg)

![fig4.svg](assets/media/fig4.svg)

![fig3.svg](assets/media/fig3.svg)

![fig5.svg](assets/media/fig5.svg)

| **å¤¹è§’** | **çœŸå®å˜æ¢çŸ©é˜µ**              | **è®¡ç®—å˜æ¢çŸ©é˜µ** | **è¯¯å·®** |
| -------- | ----------------------------- | ---------------- | -------- |
| 0åº¦      | `[1.0000    0.0000    -0.4000 |
 0.0000    1.0000     0.4000 
 0.0000    0.0000     1.0000]` | `[0.9988   -0.0481   -0.3450 
 0.0481    0.9988    0.3925 
 0.0000    0.0000    1.0000]` | 0.018566 |
| 45åº¦ | `[0.7071   -0.7071   -0.4000 
 0.7071    0.7071    0.4000 
 0.0000    0.0000    1.0000]` | `[0.7071   -0.7071   -0.4000 
 0.7071    0.7071    0.4000 
 0.0000    0.0000    1.0000]`  | 0.000000ï¼ˆ8è½®ï¼‰ |
| 90åº¦  | `[0.0000   -1.0000   -0.4000 
 1.0000    0.0000    0.4000 
 0.0000    0.0000    1.0000]` | `[0.0789   -0.9969   -0.4028 
 -0.9969   -0.0789   0.4904 
 0.0000    0.0000    1.0000]` | 0.022629 |
| 180åº¦   | `[-1.0000   -0.0000   -0.4000 
 0.0000    -1.0000    0.4000 
 0.0000    0.0000    1.0000]` | `[0.9972   -0.0747   -0.3129 
 -0.0747   -0.9972   0.3999 
 0.0000    0.0000    1.0000]` | 0.021254 |

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¤¹è§’ä¸º45åº¦çš„æ—¶å€™ï¼Œè®­ç»ƒç»“æœæœ€å¥½ï¼Œå…¶ä½™åº¦æ•°ä¸‹æ•ˆæœå·®ä¸å¤šï¼Œå¦å¤–åœ¨90åº¦å’Œ180åº¦çš„æƒ…å†µä¸‹ï¼Œç‚¹äº‘å‡å‘ç”Ÿäº†ä¸Šä¸‹æˆ–è€…å·¦å³çš„ç¿»è½¬ï¼Œå› æ­¤å˜æ¢çŸ©é˜µä¼šå·®ä¸€ä¸ªç¬¦å·ã€‚

ç»¼ä¸Šï¼Œå¯¹äºå™ªå£°è¾ƒå°çš„æŠ›ç‰©çº¿ç‚¹äº‘æ¥è¯´ï¼Œè§’åº¦å’Œä½ç½®å½±å“è¿˜ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯å¦‚æœå¢åŠ å™ªå£°ä¸º0.2ï¼Œå½±å“å°±ä¼šæ”¾å¤§ï¼ŒåŒæ ·è®¾ç½®4ä¸ªè§’åº¦ï¼ŒåŒ¹é…ç»“æœå¦‚ä¸‹ï¼Œ

![fig22.svg](assets/media/fig22.svg)

![fig24.svg](assets/media/fig24.svg)

![fig23.svg](assets/media/fig23.svg)

![fig25.svg](assets/media/fig25.svg)

| **å¤¹è§’** | **çœŸå®å˜æ¢çŸ©é˜µ**              | **è®¡ç®—å˜æ¢çŸ©é˜µ** | **è¯¯å·®** |
| -------- | ----------------------------- | ---------------- | -------- |
| 0åº¦      | `[1.0000    0.0000    -0.4000 |
 0.0000    1.0000     0.4000 
 0.0000    0.0000     1.0000]` | `[0.9953   -0.0973   -0.3150 
 0.0973    0.9953    0.3168 
 0.0000    0.0000    1.0000]` | 0.050816 |
| 45åº¦ | `[0.7071   -0.7071   -0.4000 
 0.7071    0.7071    0.4000 
 0.0000    0.0000    1.0000]` | `[0.7071   -0.7071   -0.4000 
 0.7071    0.7071    0.4000 
 0.0000    0.0000    1.0000]` | 0.000000ï¼ˆ24è½®ï¼‰ |
| 90åº¦ | `[0.0000   -1.0000   -0.4000 
 1.0000    0.0000    0.4000 
 0.0000    0.0000    1.0000]` | `[0.8866    0.4625   -0.8336 
 -0.4625    0.8866    0.2643 
 0.0000     0.0000    1.0000]` | 0.165742 |
| 180åº¦ | `[-1.0000   -0.0000   -0.4000 
 0.0000    -1.0000    0.4000 
 0.0000    0.0000    1.0000]` | `[0.9433   -0.3319   -0.3609 
 0.3319    0.9433   -0.2515 
 0.0000    0.0000    1.0000]` | 0.168322 |

å¯ä»¥çœ‹è§45åº¦çš„æƒ…å†µä¸‹ï¼Œæ•ˆæœä¾ç„¶éå¸¸å®Œç¾ï¼Œåªæ˜¯è®­ç»ƒè½®æ•°æœ‰æ‰€å¢åŠ ï¼Œ0åº¦çš„æ—¶å€™æŠ›ç‰©çº¿æ–¹å‘æ­£ç¡®ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç²¾å‡†åŒ¹é…ï¼Œè€Œå¯¹äº90åº¦å’Œ180åº¦çš„æƒ…å†µæ¥è¯´ï¼Œæœå‘å°±å­˜åœ¨é—®é¢˜ã€‚

åœ¨å®é™…æƒ…å†µä¸­ï¼Œå¦‚æœç‚¹äº‘çš„èšé›†æ€§æ¯”è¾ƒå¥½ï¼Œæ¯”å¦‚è¯´å¢™é¢ï¼ŒICPç®—æ³•å°±èƒ½å¤Ÿå¾ˆå¥½åœ°è¿›è¡ŒåŒ¹é…ï¼Œä½†æ˜¯å¯¹äºè¾ƒä¸ºåˆ†æ•£çš„ç‚¹äº‘ï¼ŒåŒ¹é…çš„æ•ˆæœå°±ä¸å°½äººæ„ï¼Œä¼šé™·å…¥å±€éƒ¨æœ€ä¼˜è§£çš„æƒ…å†µã€‚

### é™„MATLABä»£ç 

```matlab
clear; clc;
close all;

% åˆ›å»ºäºŒç»´ç‚¹äº‘ï¼ŒæŠ›ç‰©çº¿å½¢çŠ¶
num_points = 100;
x = linspace(-1, 1, num_points);
noise = 0.02;
y = x.^2 + randn(1, num_points) * noise; % æ·»åŠ ä¸€äº›å™ªå£°
P = [x; y]; % äºŒç»´ç‚¹äº‘ï¼Œæ¯åˆ—ä¸€ä¸ªç‚¹
P_old =P;
% å°†ç‚¹äº‘Pæ²¿ç€yè½´å¹³ç§»ä¸€äº›è·ç¦»ï¼Œå½¢æˆç›®æ ‡ç‚¹äº‘Q
t_0 = [-0.4; 0.4]; % å¹³ç§»å‘é‡
theta_0 = pi/8;
R_0 = [cos(theta_0), -sin(theta_0); sin(theta_0), cos(theta_0)];
Q = R_0*P + repmat(t_0, 1, num_points);

% åˆå§‹åŒ–ICPå‚æ•°
W = eye(num_points); % æƒé‡å¯¹è§’çŸ©é˜µ
theta = 0; % é€†æ—¶é’ˆæ—‹è½¬è§’åº¦
R = [cos(theta) -sin(theta); sin(theta) cos(theta)]; % æ—‹è½¬çŸ©é˜µ
t = [0; 0]; % å¹³ç§»å‘é‡

% è¯¯å·®é˜ˆå€¼
th = 1e-6;

% åˆå§‹å˜æ¢çŸ©é˜µ
T_0 = [R_0, t_0; 0 0 1];
T = [R, t; 0 0 1];

% ICPè¿­ä»£åŒ¹é…
max_iteration = 40;
for index = 1 : max_iteration % è¿­ä»£æ¬¡æ•°
    [idx, dist] = knnsearch(Q',P');
    error = sum(dist)/num_points;
    if error < 1e-6
        break
    end
    Q_mid = Q(:,idx);
    P_hat = sum(W*P')'/sum(diag(W));
    Q_hat = sum(W*Q_mid')'/sum(diag(W));
    X  = P - P_hat;
    Y = Q_mid - Q_hat;
    S = X *W* Y';
    [U, ~, V] = svd(S);
    R = V * U';
    t = Q_hat - R * P_hat;
    T = T*[R,t;0 0 1];
    P = R*P +repmat(t, 1, num_points);

    theta = atan2(R(2, 2), R(2, 1));

    % æ‰“å°è¿­ä»£æ¬¡æ•°ã€è¿­ä»£è¯¯å·®
    clc;
    fprintf('è¿­ä»£æ¬¡æ•°: index = %d\n', index);
    fprintf('è¿­ä»£è¯¯å·®: error = %4.6f\n', error); 

    % æ‰“å°è¿‡ç¨‹ç»“æœ
    figure(1)
    clf
    plot(P(1,:), P(2,:), '.b');
    hold on;
    plot(Q(1,:), Q(2,:), '.r');
    drawnow;
end

% æ‰“å°ç»“æœ
fprintf('è®¡ç®—çŸ©é˜µ: tran = \n'); disp(T);
fprintf('åŸå§‹çŸ©é˜µ: tran = \n'); disp(T_0);  %æ—‹è½¬çŸ©é˜µçœŸå€¼

figure('name', 'target');
plot(P_old(1,:), P_old(2,:), '.r');
hold on;
plot(Q(1,:), Q(2,:), '.b');
plot(P(1,:), P(2,:), '.g');
legend('åŸç‚¹äº‘', 'ç›®æ ‡ç‚¹äº‘', 'ç›®æ ‡è½¬åŒ–åŸç‚¹äº‘ç»“æœ');
ylabel('y');
xlabel('x')
title('ICP Registration of Point Cloud');
```

# åŸºäºHoughå˜æ¢çš„2Dç‚¹äº‘ç›´çº¿æå–

æœºå™¨äººæ¿€å…‰é›·è¾¾æ‰€é‡‡é›†çš„ç‚¹äº‘æ•°æ®æ•°é‡åºå¤§ï¼Œä¸ºäº†å‡å°å­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥å¯¹ç‚¹äº‘æ•°æ®è¿›è¡Œç›´çº¿ï¼ˆå¹³é¢ï¼‰æå–ï¼Œä¹Ÿå°±æ˜¯å°†å¤§é‡ç‚¹äº‘æ•°æ®è½¬å˜ä¸ºä¸€æ¡æ¡çº¿æ®µï¼Œè¿™æ ·èƒ½å¤Ÿä¸ºå¯¼èˆªå®šä½ç­‰ä»»åŠ¡æä¾›æ›´åŠ ç²¾ç¡®çš„ä¿¡æ¯ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è·å–é«˜ç»´ç‰¹å¾çš„åŸºç¡€ï¼Œä¸»è¦çš„ç›´çº¿æå–ç®—æ³•æœ‰4ç§ï¼Œåˆ†åˆ«æ˜¯Split-and-mergeï¼ŒLinear regressionï¼ŒRANSACä»¥åŠHough-Transformã€‚

## 2Dç‚¹äº‘ç›´çº¿æå–ç®—æ³•

### Split-and-mergeç®—æ³•

è¿™æ˜¯ä¸€ç§åˆ©ç”¨é€’å½’æ€æƒ³å¯¹2Dç‚¹äº‘è¿›è¡Œç›´çº¿æå–çš„ç®—æ³•ï¼Œæ­¥éª¤è¾ƒä¸ºç®€å•ï¼Œå‡è®¾$\mathcal{S}$ä¸º2Dç‚¹äº‘çš„æ‰€æœ‰ç‚¹çš„åæ ‡æ•°æ®ï¼Œå…·ä½“ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼Œ

<aside>
ğŸª“ **SPLITï¼š**
 å¯¹äºç‚¹é›†$\mathcal{S}$ï¼Œæ‰¾åˆ°ä¸€æ¡ç›´çº¿ä½¿å¾—ç‚¹é›†ä¸­æ‰€æœ‰ç‚¹åˆ°è¯¥ç›´çº¿çš„è·ç¦»å’Œæœ€çŸ­
æ‰¾åˆ°è·ç¦»è¯¥ç›´çº¿æœ€è¿œçš„é‚£ä¸ªç‚¹$p_k$ï¼Œå¦‚æœ$d_k>\text{th}$ï¼Œåˆ™å°†ç‚¹äº‘ä»è¯¥ç‚¹å¤„åˆ†å‰²æˆå·¦å³ä¸¤éƒ¨åˆ†
å¯¹å·¦å³ä¸¤éƒ¨åˆ†ç‚¹é›†$\mathcal{S}_l$å’Œ$\mathcal{S}_r$é‡å¤ä¸Šè¿°æ­¥éª¤ï¼›
**MERGEï¼š**
å¦‚æœè¿ç»­çš„å­é›†æ‹Ÿåˆå‡ºæ¥çš„çº¿æ®µå·²ç»æ¥è¿‘å…±çº¿ï¼Œå°±è·å–ä¸¤ä¸ªå­é›†å¹¶é›†æ‹Ÿåˆå‡ºçš„çº¿æ®µï¼Œå¹¶æ‰¾åˆ°è·ç¦»æœ€è¿œçš„ç‚¹$p_l$ï¼Œå¦‚æœ$d_l\leq\text{th}$ï¼Œå°±å°†ä¸¤ä¸ªå­é›†åˆå¹¶ã€‚

</aside>

### Linear regressionç®—æ³•

è¯¥ç®—æ³•åˆ©ç”¨ç‰¹å®šå¤§å°çš„æ»‘åŠ¨çª—å£ï¼Œæ²¿ç€ç‚¹é›†åˆ†å¸ƒæ–¹å‘ç§»åŠ¨ï¼Œå…·ä½“ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼Œ

<aside>
ğŸ› åˆå§‹åŒ–æ»‘åŠ¨çª—å£æ‰€åŒ…å«çš„ç‚¹çš„æ•°é‡$N_f$
å¯¹äºæ¯è¿ç»­$N_f$ä¸ªç‚¹æ‹Ÿåˆå‡ºä¸€æ¡çº¿æ®µï¼Œ
å°†é‡å çš„çº¿æ¡è¿›è¡Œåˆå¹¶ï¼Œå¯¹å…¶å¯¹åº”çš„å‚æ•°è¿›è¡Œé‡æ–°è®¡ç®—ã€‚

</aside>

### RANSACç®—æ³•

RANSACç®—æ³•å…¨ç§°ä¸º**RAN**dom **SA**mple **C**onsensusï¼Œæ˜¯ä¸€ç§é€šç”¨çš„ã€é²æ£’çš„ç®—æ³•ï¼Œèƒ½å¤Ÿç”¨æ¥å¯¹2Dç‚¹äº‘è¿›è¡Œç›´çº¿æå–ï¼Œå¯¹äºä¸€äº›å……æ»¡å™ªå£°çš„æ•°æ®é›†æœ‰è¾ƒå¥½çš„æ•ˆæœï¼Œå¦å¤–ï¼ŒRANSACç®—æ³•æ˜¯ä¸€ç§è¿­ä»£ç®—æ³•ï¼Œå®ƒæ¯æ¬¡è¿è¡Œçš„ç»“æœæ˜¯éç¡®å®šæ€§çš„ï¼Œå…¶å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼Œ

<aside>
ğŸ² ä»ç‚¹äº‘æ•°æ®ä¸­éšæœºé€‰æ‹©ä¸¤ä¸ªç‚¹ï¼Œå¹¶è®¡ç®—è¿™ä¸¤ä¸ªç‚¹æ‹Ÿåˆå‡ºçš„ç›´çº¿çš„å‚æ•°
è®¡ç®—æ‰€æœ‰å…¶ä½™ç‚¹åˆ°è¯¥ç›´çº¿çš„è·ç¦»ï¼Œå¹¶é€‰æ‹©è·ç¦»å°äºé˜ˆå€¼çš„ç‚¹ä½œä¸ºå½“å‰å‡è®¾ç›´çº¿çš„æ”¯æ’‘ã€‚
å¯¹ç‚¹äº‘æ•°æ®è¿›è¡Œé‡å¤é‡‡æ ·ï¼Œç›´åˆ°åœ¨é˜ˆå€¼èŒƒå›´å†…è·å–åˆ°äº†æœ€å¤šæ•°é‡çš„ç‚¹ã€‚

</aside>

å½“ç„¶ï¼Œä¸Šè¿°çš„RANSACç®—æ³•å¯¹äºæ•°é‡åºå¤§çš„ç‚¹äº‘é›†åˆæ¥è¯´ï¼Œæ‰€éœ€çš„è®¡ç®—é‡å¾ˆå¤§ï¼Œä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼ŒRANSACç®—æ³•è¿˜æœ‰å¾ˆå¤šå˜ä½“ã€‚

### Hough-Transformç®—æ³•

Houghå˜æ¢æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„ç”¨äºæå–å›¾åƒä¸­çš„çº¿æ®µçš„ç®—æ³•ï¼Œå®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯å°†å›¾åƒç©ºé—´ä¸­çš„ç‚¹æ˜ å°„åˆ°Houghå‚æ•°ç©ºé—´ä¸­ã€‚

å¯¹äºä¸€æ¡ç›´çº¿æ¥è¯´ï¼Œä¸ºäº†é¿å…ç¬›å¡å°”åæ ‡ç³»ä¸‹ç«–ç›´çº¿æ¡å¯èƒ½çš„æ— å®šä¹‰çš„æƒ…å†µï¼ŒåŒæ—¶ä¸ºäº†å‡å°å‚æ•°èŒƒå›´ï¼Œå°†å…¶ä»¥æåæ ‡ç³»çš„æ–¹å¼æ¥è¡¨ç¤ºï¼Œä¸»è¦å…¬å¼ä¸ºï¼Œ

$$
\rho=x\cos\theta+y\sin\theta
$$

å…¶ä¸­$\theta\in[0,\pi)$ï¼Œ$\rho\in[-\rho_{\max},\rho_{\max}]$ï¼Œäºæ˜¯å‚æ•°ç©ºé—´ä¸º$(\theta,\rho)$

![Untitled](assets/media/49908f56-abff-4228-9270-e0a3513a5b68.png)

![Untitled](assets/media/Untitled%2013.png)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨å›¾åƒç©ºé—´ä¸­çš„ä¸€æ¡ç›´çº¿æ˜ å°„åˆ°$(\theta,\rho)$å‚æ•°ç©ºé—´ä¸­å°±å˜æˆäº†ä¸€ä¸ªç‚¹ï¼Œè€Œå¯¹äºå›¾åƒç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹æ˜ å°„åˆ°$(\theta,\rho)$å‚æ•°ç©ºé—´ä¸­å°±å˜æˆäº†ä¸€æ¡æ­£å¼¦æ›²çº¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ

![Untitled](assets/media/Untitled%2014.png)

![Untitled](assets/media/Untitled%2015.png)

äºæ˜¯å¯ä»¥é€šè¿‡äº¤äºåŒä¸€ç‚¹çš„æ›²çº¿æ•°é‡æ¥ç¡®å®š$(\theta,\rho)$ï¼Œå³æ•°é‡è¶Šå¤šï¼Œè¶Šæ¥è¿‘åŸå›¾åƒä¸­çš„ç›´çº¿å¯¹åº”çš„å‚æ•°ã€‚è®¡ç®—ç»è¿‡äº¤ç‚¹æ›²çº¿æ•°é‡ä¹‹å‰ï¼Œéœ€è¦å°†$(\theta,\rho)$ç©ºé—´è¿›è¡Œç½‘æ ¼åŒ–ï¼Œå¹¶è®¡ç®—çº¿æ¡ç»è¿‡å•å…ƒæ ¼çš„ç´¯è®¡å€¼ï¼Œç´¯è®¡å€¼æœ€å¤§çš„ç½‘æ ¼å¯¹åº”çš„$(\theta,\rho)$ï¼Œå³ä¸ºæ‰€æ±‚çš„å‚æ•°ï¼Œæ ¹æ®ç²¾åº¦è¦æ±‚ç¡®å®šåˆ’åˆ†ç½‘æ ¼çš„æ•°é‡ã€‚

## åˆ©ç”¨Houghå˜æ¢ç®—æ³•è¿›è¡Œ2Dç‚¹äº‘ç›´çº¿æå–ä»¿çœŸ

### ä»¿çœŸä»»åŠ¡è®¾è®¡

- åˆ©ç”¨ä»£ç ç”Ÿæˆä¸€ç»„å¸¦å™ªå£°çš„ç›´çº¿ç‚¹äº‘æ•°æ®
- é€šè¿‡Houghå˜æ¢æ–¹æ³•æ‹Ÿåˆå‡ºæœ€ä¼˜çš„ç›´çº¿ã€‚

### ç»“æœåˆ†æ

è®¾ç½®$\rho_t=50$ï¼Œ$\theta_t=\pi/6\approx0.524$ï¼Œæœ€ç»ˆçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ

![fig1.svg](assets/media/fig1%201.svg)

![fig2.svg](assets/media/fig2%201.svg)

å·¦å›¾é»‘è‰²ç‚¹é›†ä¸ºæ ¹æ®ä¸Šè¿°å‚æ•°ç”Ÿæˆçš„ä¸€ç»„å¸¦å™ªå£°çš„ç‚¹äº‘æ•°æ®ï¼Œçº¢è‰²ç›´çº¿ä¸ºåˆ©ç”¨Houghå˜æ¢æå–å‡ºçš„è¿‘ä¼¼ç›´çº¿ï¼Œå…¶ä¸­$\rho_p=48$ï¼Œ$\theta_p=0.537$ï¼Œä¸çœŸå®å€¼ååˆ†æ¥è¿‘ï¼›å³å›¾ä¸ºHoughå‚æ•°ç©ºé—´çš„å›¾åƒï¼Œæ¯ä¸€æ¡æ­£å¼¦æ›²çº¿å¯¹åº”ç€å·¦å›¾ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œäº¤ç‚¹æœ€å¯†é›†çš„åœ°æ–¹ï¼Œå³å¯¹åº”ç€è¿‘ä¼¼ç¨‹åº¦æœ€é«˜çš„ç›´çº¿å‚æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ

![fig3.svg](assets/media/fig3%201.svg)

### é™„MATLABä»£ç 

```matlab
num_points = 500;    % ç‚¹äº‘æ•°é‡
noise_level = 10;     % å™ªå£°æ°´å¹³
theta_true = deg2rad(30);      % thetaçœŸå®å€¼
rho_true = 50;     % rhoçœŸå®å€¼

rho_m = 400;       % rhoæœ€å¤§å€¼
theta_resolution = 0.003;  % thetaåˆ†è¾¨ç‡
x_true = linspace(-100,100,num_points);
y_true = -x_true/tan(theta_true) + rho_true/sin(theta_true);

x_noisy = x_true + randn(size(x_true))*noise_level;
y_noisy = y_true + randn(size(y_true))*noise_level;

num_rho = 2*rho_m+1;
num_theta = round(pi/theta_resolution);
rho_theta_matrix = zeros(num_rho,num_theta);

theta_values = linspace(0,pi,num_theta);
rho_values = -rho_m:rho_m;
for i = 1:num_points
    for j = 1:num_theta
        rho = x_noisy(i)*cos(theta_values(j))
                    +y_noisy(i)*sin(theta_values(j));
        rho_index =round(rho)+rho_m;
        rho_theta_matrix(rho_index,j) = 
                    rho_theta_matrix(rho_index,j) + 1;
    end
end

maximum = max(max(rho_theta_matrix));
[rho_pre,theta_pre] = find(rho_theta_matrix==maximum);
rho_pre = rho_pre - rho_m;
theta_pre = theta_pre*theta_resolution;

y_pre = -x_true/tan(theta_pre) + rho_pre/sin(theta_pre);
figure;
scatter(x_noisy,y_noisy);
title('2D Point Cloud');
xlabel('X');
ylabel('Y');
grid on;
hold on;
plot(x_true,y_pre,'r','LineWidth',2);

figure;
imagesc(theta_values, rho_values, rho_theta_matrix);
title('Rho-Theta Matrix');
xlabel('Theta');
ylabel('Rho');
colormap('jet');
colorbar;

```

# åŸºäºKalmanæ»¤æ³¢çš„2D Positionâ€‘Velocityè·Ÿè¸ª

åœ¨å¯¹ç§»åŠ¨æœºå™¨äººçš„ä½ç½®è¿›è¡Œä¼°è®¡çš„æ—¶å€™ï¼Œé€šå¸¸æœ‰æ ¹æ®é‡Œç¨‹è®¡æ¨¡å‹æ‰€å¾—åˆ°çš„ä½ç½®çš„é¢„æµ‹å€¼ï¼Œä»¥åŠåˆ©ç”¨æ¿€å…‰é›·è¾¾ç­‰ä¼ æ„Ÿå™¨æ‰€æµ‹å¾—çš„è§‚æµ‹å€¼ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸¤ç§æ•°æ®è¿›è¡Œç»¼åˆè€ƒè™‘ï¼Œè€Œå¡å°”æ›¼æ»¤æ³¢æ–¹æ³•å°±æ˜¯ä¸ºäº†ä¾æ®è¿™ä¸¤ç§æ•°æ®å¾—åˆ°æœºå™¨äººä½ç½®çš„æœ€ä¼˜ä¼°è®¡ã€‚

## Kalmanæ»¤æ³¢åŸç†

### Kalmanæ»¤æ³¢çš„åŸºæœ¬æ¨¡å‹

å¸¸è§çš„ç§»åŠ¨æœºå™¨äººå¯ä»¥æ„å»ºä¸ºä¸€ç¦»æ•£çº¿æ€§åŠ¨æ€ç³»ç»Ÿæ¨¡å‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œ

$$
\left\{\begin{aligned}
x_k&=A*x_{k-1}+B*u_{k-1}+w_{k-1}\\
z_k&=H*x_k+v_k
\end{aligned}
\right.
$$

å…¶ä¸­ï¼Œå„ä¸ªå˜é‡çš„å«ä¹‰å…·ä½“å¦‚ä¸‹ï¼Œ
$x_k$è¡¨ç¤ºç³»ç»Ÿçš„çŠ¶æ€å‘é‡ï¼Œ$z_k$ä¸ºå®æµ‹çš„ç³»ç»ŸçŠ¶æ€å‘é‡ï¼Œ$w_{k-1}$è¡¨ç¤ºè¿‡ç¨‹å™ªå£°ï¼Œ$v_k$è¡¨ç¤ºæµ‹é‡å™ªå£°

$A$è¡¨ç¤ºçŠ¶æ€è½¬ç§»çŸ©é˜µï¼Œ$B$ä¸ºæ§åˆ¶è¾“å…¥çŸ©é˜µï¼Œ$H$è¡¨ç¤ºçŠ¶æ€è§‚æµ‹çŸ©é˜µ

å…¶ä¸­ï¼Œ$w_{k-1}$å’Œ$v_k$å‡ä¸ºé«˜æ–¯ç™½å™ªå£°ï¼Œåæ–¹å·®çŸ©é˜µåˆ†åˆ«ä¸º$Q$å’Œ$R$ã€‚

### Kalmanæ»¤æ³¢å…¬å¼æ¨å¯¼

åœ¨çŠ¶æ€ä¼°è®¡ç®—æ³•ä¸­ï¼Œå¯¹äºçŠ¶æ€å‘é‡æœ‰ä»¥ä¸‹å‡ ç§è¡¨ç¤ºï¼Œ
$x_k$è¡¨ç¤ºçŠ¶æ€çš„çœŸå®å€¼ï¼Œ$\tilde{x}_k^-$è¡¨ç¤ºçŠ¶æ€çš„é¢„æµ‹å€¼ï¼ˆå…ˆéªŒçŠ¶æ€ä¼°è®¡å€¼ï¼Œæ¯”å¦‚æ ¹æ®é‡Œç¨‹è®¡å¾—åˆ°çš„ä½ç½®æ•°æ®ï¼‰ï¼Œ$\tilde{x}_k$è¡¨ç¤ºçŠ¶æ€çš„æœ€ä¼˜ä¼°è®¡ï¼ˆåéªŒçŠ¶æ€ä¼°è®¡å€¼ï¼‰

çŠ¶æ€é¢„æµ‹å€¼$\tilde{x}_k^-$ç”±çŠ¶æ€é¢„æµ‹æ–¹ç¨‹å¾—ï¼Œ

$$
\tilde{x}_k^-=A*\tilde{x}_{k-1}+B*u_{k-1}
$$

çŠ¶æ€æœ€ä¼˜ä¼°è®¡å€¼$\tilde{x}_k$ç”±çŠ¶æ€æ›´æ–°æ–¹ç¨‹ç»™å‡ºï¼Œå³

$$
\tilde{x}_k=\tilde{x}_k^-+K(z_k-H*\tilde{x}_k^-)
$$

å…¶ä¸­$K$ä¸ºKalmanå¢ç›Šï¼Œ$K=é¢„æµ‹å€¼æ–¹å·®/(é¢„æµ‹å€¼æ–¹å·®+æµ‹é‡å€¼æ–¹å·®)$ï¼Œä¸”$K\in[0,1]$ï¼Œå¦‚æœé¢„æµ‹å€¼æ–¹å·®ä¸º0ï¼Œé‚£ä¹ˆ$K=0$ï¼Œæ­¤æ—¶æœ€ä¼˜ä¼°è®¡å€¼å°±æ˜¯é¢„æµ‹å€¼ï¼Œåä¹‹å¦‚æœæµ‹é‡å€¼æ–¹å·®ä¸º0ï¼Œé‚£ä¹ˆ$K=1$ï¼Œæµ‹è¯•æœ€ä¼˜ä¼°è®¡å°±æ˜¯æµ‹é‡å€¼ã€‚

è®¾$e_k^-=x_k-\tilde{x}_k^-$ä¸ºå…ˆéªŒçŠ¶æ€è¯¯å·®ï¼Œ$e_k=x_k-\tilde{x}_k$ä¸ºåéªŒçŠ¶æ€è¯¯å·®ï¼Œ$P_k^-=E[e_k^-e_k^{-T}]$ä¸ºé¢„æµ‹å€¼çš„æ–¹å·®ï¼Œ$P_k=E[e_ke_k^T]$ä¸ºæœ€ä¼˜ä¼°è®¡å€¼çš„æ–¹å·®ï¼ŒKalmanæ»¤æ³¢çš„ç›®çš„å³ä½¿å¾—$P_k$æœ€å°ï¼Œåˆæ¨å¾—ï¼Œ

$$
P_k=(I-KH)*P_k^-(I-KH)^T+K*R*K^T
$$

ç”±

$$
\frac{\partial{P_k}}{\partial{K}}=0
$$

å¾—

$$
K=P_k^-H^T(HP_k^-H^T+R)^{-1}
$$

ä»£å…¥$P_k$å…¬å¼å¯å¾—ï¼Œ

$$
P_k=(I-KH)*P_k^-
$$

åˆç»æ¨å¯¼å¯å¾—ï¼Œ

$$
e_{k+1}^-=A*e_k+w_k
$$

æ‰€ä»¥å¯å¾—æ–¹å·®å…³ç³»å¦‚ä¸‹ï¼Œ

$$
P_{k+1}^-=A*P_k*A^T+Q
$$

## åˆ©ç”¨Kalmanæ»¤æ³¢å®ç°2D PVè·Ÿè¸ª

### æ¨¡å‹å»ºç«‹

è®¾ç³»ç»Ÿçš„çŠ¶æ€å‘é‡ä¸ºï¼Œ

$$
X_k=\begin{bmatrix}
x(k)&y(k)&v_x(k)&v_y(k)
\end{bmatrix}^T
$$

åˆ†åˆ«ä»£è¡¨æœºå™¨äººçš„æ¨ªçºµåæ ‡å’Œæ°´å¹³å’Œç«–ç›´æ–¹å‘çš„é€Ÿåº¦ï¼ˆè¿™é‡Œä¸è€ƒè™‘æœºå™¨äººçš„æœå‘ï¼‰ï¼Œæ ¹æ®ä½ç§»å…¬å¼å¯å¾—ï¼Œ

$$
\left\{\begin{aligned}
x(k)&=x(k-1)+v_x(k-1)\Delta t+0.5*a_x(k-1)\Delta t^2\\
y(k)&=y(k-1)+v_y(k-1)\Delta t+0.5*a_y(k-1)\Delta t^2\\
v_x(k)&=v_x(k-1)+a_x(k-1)\Delta t\\
v_y(k)&=v_y(k-1)+a_y(k-1)\Delta t
\end{aligned}
\right.
$$

å†™æˆçŸ©é˜µå½¢å¼ä¸ºï¼Œ

$$

\begin{aligned}X(k)=\begin{bmatrix}
x(k)\\y(k)\\v_x(k)\\v_y(k)
\end{bmatrix}
=\begin{bmatrix}
1&0&\Delta t&0\\
0&1&0&\Delta t\\
0&0&1&0\\
0&0&0&1
\end{bmatrix}
\begin{bmatrix}
x(k-1)\\y(k-1)\\v_x(k-1)
\\v_y(k-1)
\end{bmatrix}
\\+\begin{bmatrix}
0.5*\Delta t^2&0\\
0&0.5*\Delta t^2\\
\Delta t&0\\
0&\Delta t
\end{bmatrix}
\begin{bmatrix}
a_x(k-1)\\a_y(k-1)
\end{bmatrix}
\end{aligned}
$$

åœ¨ä¸Šè¿°åŸºç¡€ä¸Šæ·»åŠ è¿‡ç¨‹å™ªå£°$w$ï¼Œå¾—åˆ°ï¼Œ

$$
X(k)=A*X(k-1)+B*u(k-1)+w(k-1)
$$

å¦å¤–ï¼Œæµ‹é‡æ–¹ç¨‹å¯ä»¥ç›´æ¥å†™æˆå¦‚ä¸‹å½¢å¼ï¼Œ

$$
Z(k)=H*X(k)+v(k-1)
$$

å…¶ä¸­ï¼Œ$w\sim N(0,Q)$ï¼Œ$v\sim N(0,R)$ï¼Œ

$$
\left\{\begin{aligned}Q&=BQ_bB^T=B\begin{bmatrix}
\sigma_{a_x}^2&0\\0&\sigma_{a_y}^2
\end{bmatrix}B^T\\
R&=HH^TV=HH^T\begin{bmatrix}
\sigma_{z_x}^2&0\\0&\sigma_{z_y}^2
\end{bmatrix}
\end{aligned}
\right.
$$

è§‚æµ‹çŸ©é˜µ$H$ä¸ºï¼Œ

$$
H=\begin{bmatrix}
1&0&0&0\\0&1&0&0
\end{bmatrix}
$$

### ç®—æ³•æµç¨‹

---

åˆå§‹åŒ–$P_0=0$ï¼Œåˆ™$P_1^-=Q=BQ_bB^T$ï¼Œ
æ¥ç€å¯ä»¥æ±‚å–$K=P_1^-H^T(HP_1^-H^T+R)^{-1}$

æ ¹æ®$K$å€¼ï¼Œå¯ä»¥å¾—åˆ°æœ€ä¼˜ä¼°è®¡å€¼$\tilde{x}_k=\tilde{x}_k^-+K(z_k-H\tilde{x}_k^-)$
è¿›ä¸€æ­¥å¯ä»¥æ±‚å¾—$P_1=(I-KH)*P_1^-$ï¼Œæ¥ç€åˆå¯ä»¥æ±‚å‡º$P_2^-=AP_1A^T+Q$ï¼Œ

ä¾æ¬¡ç±»æ¨å¯ä»¥æ±‚å‡ºæ‰€æœ‰$P_k$å’Œ$K_k$ï¼Œä»¥åŠ$\tilde{x}_k$

---

### ç»“æœåˆ†æ

è®¾æ—¶é—´æ­¥é•¿ä¸º$0.01s$ï¼Œ$\sigma_{a_x}=\sigma_{a_y}=3$ï¼Œ$\sigma_{z_x}=\sigma_{z_y}=1$ï¼Œ$a_x=3\cos{t}$ï¼Œ$a_y=3\sin{t}$
è®¾åˆå§‹çŠ¶æ€ä¸º$X_0=\begin{bmatrix}
2.4&3.1&1.4&-2.6
\end{bmatrix}$
æœ€ç»ˆå¾—åˆ°ç»“æœå¦‚ä¸‹ï¼Œ

![f2.svg](assets/media/f2.svg)

ä¸Šå›¾æ˜¯åˆ©ç”¨äº†Kalmanæ»¤æ³¢å¯¹é¢„æµ‹å€¼è¿›è¡Œä¿®æ­£çš„ç»“æœï¼Œå¯è§ä¼°è®¡è½¨è¿¹ä¸çœŸå®è½¨è¿¹ååˆ†æ¥è¿‘ï¼Œæ•ˆæœè¾ƒå¥½ï¼Œè€Œä¸‹å›¾æ˜¯æ²¡æœ‰å¢åŠ Kalmanæ»¤æ³¢çš„ç»“æœå›¾ï¼Œ

![f1.svg](assets/media/f1.svg)

å¯è§ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œæœºå™¨äººä½ç½®çš„é¢„æµ‹å€¼å’Œå®é™…å€¼ä¼šè¶Šå·®è¶Šè¿œã€‚

### é™„MATLABä»£ç 

```matlab
close all;
clear;clc;

% time step
dt=0.01;
t = 0:dt:4;

% process and mesurement noise
sigma_a_x = 3;
sigma_a_y = 3;
sigma_z_x = 1;
sigma_z_y = 1;

% System matrices
A = [1 0 dt 0; 0 1 0 dt; 0 0 1 0; 0 0 0 1];
B = [0.5*dt^2 0; 0 0.5*dt^2; dt 0; 0 dt];
H = [1 0 0 0; 0 1 0 0];
Q_b = [sigma_a_x.^2 0; 0 sigma_a_y.^2];
V = [sigma_z_x.^2 0; 0 sigma_z_y.^2];
R = H*H'*V;
Q = B*Q_b*B';

% true acceleration
a_x = 3*cos(t);
a_y = 3*sin(t);
% add process noise
a_x_ = a_x + normrnd(0,sigma_a_x,1,length(t));
a_y_ = a_y + normrnd(0,sigma_a_y,1,length(t));
u = [a_x;a_y];
u_ = [a_x_;a_y_];

X_0=[2.4 3.1 1.4 -2.6]'; % define the initial conditions

% Initialize 3 states
X_true = zeros(4,length(t));
X_meas = zeros(2,length(t));
X_esti = zeros(4,length(t));
X_true(:,1) = X_0;
X_esti(:,1)=X_0;

% Generate data:
for i = 2:1:length(t)
    X_true(:,i) = A*X_true(:,i-1) + B*u_(:,i-1);
    X_meas(1,i) = X_true(1,i) + normrnd(0,sigma_z_x,1,1);
    X_meas(2,i) = X_true(2,i) + normrnd(0,sigma_z_y,1,1);
    X_esti(:,i) = A*X_esti(:,i-1) + B*u(:,i-1);
end

%Initializing P
P=Q;

% Kalman filter loop
for i=2:1:length(t)
    X_esti(:,i) = A*X_esti(:,i-1) + B*u(:,i-1);
    P_ = A*P*A' + Q;
    K = P_*H'/(H*P_*H'+R);
    X_esti(:,i) = X_esti(:,i)+K*(X_meas(:,i)-H*X_esti(:,i));
    P = (eye(4) - K*H)*P_; 
end

% plot trajectories
figure;
hold on;
plot(X_true(1,:),X_true(2,:),'k-','LineWidth',1, ...
    'DisplayName','True Trajectory');
plot(X_meas(1,:),X_meas(2,:),'.','MarkerSize',5, ...
    'DisplayName','Measured Points');
plot(X_esti(1,:),X_esti(2,:),'r--','LineWidth',1, ...
    'DisplayName','Estimated Trajectory');
legend('Location','best');
grid on;
axis equal;
```